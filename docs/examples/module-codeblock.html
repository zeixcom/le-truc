<h3 id="module-codeblock"><a name="module-codeblock" class="anchor" href="#module-codeblock"><span class="title">Module Codeblock</span><span class="permalink">#</span></a></h3><p>A progressively enhanced code block that can collapse, expand, and copy its content. Demonstrates <code>asBoolean()</code> for a boolean attribute-backed property, <code>toggleAttribute()</code> to reflect <code>collapsed</code> back to the host element for CSS styling, and <code>on('click')</code> with simple imperative property updates. The <code>copy</code> effect is a custom reusable function (<code>copyToClipboard</code>) that returns an <code>Effect</code> â€” showing how to extract and share effect logic across components.</p><h4 id="preview"><a name="preview" class="anchor" href="#preview"><span class="title">Preview</span><span class="permalink">#</span></a></h4><module-demo><div class="preview"><module-codeblock id="codeblock_module-codeblock-ts" collapsed language="ts"><p class="meta"><span class="file">module-codeblock.ts</span><span class="language">ts</span></p><module-scrollarea orientation="horizontal"><pre><code class="language-ts"><span class="line"><span style="color:#F92672">import</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">	asBoolean,</span></span>
<span class="line"><span style="color:#F92672">	type</span><span style="color:#F8F8F2"> Component,</span></span>
<span class="line"><span style="color:#F8F8F2">	defineComponent,</span></span>
<span class="line"><span style="color:#F8F8F2">	on,</span></span>
<span class="line"><span style="color:#F8F8F2">	toggleAttribute,</span></span>
<span class="line"><span style="color:#F8F8F2">} </span><span style="color:#F92672">from</span><span style="color:#E6DB74"> '../..'</span></span>
<span class="line"><span style="color:#F92672">import</span><span style="color:#F92672"> type</span><span style="color:#F8F8F2"> { BasicButtonProps } </span><span style="color:#F92672">from</span><span style="color:#E6DB74"> '../basic-button/basic-button'</span></span>
<span class="line"><span style="color:#F92672">import</span><span style="color:#F8F8F2"> { copyToClipboard } </span><span style="color:#F92672">from</span><span style="color:#E6DB74"> '../basic-button/copyToClipboard'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">export</span><span style="color:#66D9EF;font-style:italic"> type</span><span> </span><span style="color:#A6E22E;text-decoration:underline">ModuleCodeblockProps</span><span style="color:#F92672"> =</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">	collapsed</span><span style="color:#F92672">:</span><span style="color:#66D9EF;font-style:italic"> boolean</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">type</span><span> </span><span style="color:#A6E22E;text-decoration:underline">ModuleCodeblockUI</span><span style="color:#F92672"> =</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">	code</span><span style="color:#F92672">:</span><span> </span><span style="color:#A6E22E;text-decoration:underline">HTMLElement</span></span>
<span class="line"><span style="color:#F8F8F2">	overlay</span><span style="color:#F92672">?:</span><span> </span><span style="color:#A6E22E;text-decoration:underline">HTMLButtonElement</span></span>
<span class="line"><span style="color:#F8F8F2">	copy</span><span style="color:#F92672">?:</span><span> </span><span style="color:#A6E22E;text-decoration:underline">Component</span><span style="color:#F8F8F2">&lt;</span><span style="color:#A6E22E;text-decoration:underline">BasicButtonProps</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">declare</span><span style="color:#F8F8F2"> global {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">	interface</span><span> </span><span style="color:#A6E22E;text-decoration:underline">HTMLElementTagNameMap</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#E6DB74"> 'module-codeblock'</span><span style="color:#F92672">:</span><span> </span><span style="color:#A6E22E;text-decoration:underline">Component</span><span style="color:#F8F8F2">&lt;</span><span style="color:#A6E22E;text-decoration:underline">ModuleCodeblockProps</span><span style="color:#F8F8F2">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2">	}</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">export</span><span style="color:#F92672"> default</span><span style="color:#A6E22E"> defineComponent</span><span style="color:#F8F8F2">&lt;</span><span style="color:#A6E22E;text-decoration:underline">ModuleCodeblockProps</span><span style="color:#F8F8F2">, </span><span style="color:#A6E22E;text-decoration:underline">ModuleCodeblockUI</span><span style="color:#F8F8F2">&gt;(</span></span>
<span class="line"><span style="color:#E6DB74">	'module-codeblock'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">	{ collapsed: </span><span style="color:#A6E22E">asBoolean</span><span style="color:#F8F8F2">() },</span></span>
<span class="line"><span style="color:#F8F8F2">	({ </span><span style="color:#FD971F;font-style:italic">first</span><span style="color:#F8F8F2"> }) </span><span style="color:#66D9EF;font-style:italic">=&gt;</span><span style="color:#F8F8F2"> ({</span></span>
<span class="line"><span style="color:#F8F8F2"> code: </span><span style="color:#A6E22E">first</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'code'</span><span style="color:#F8F8F2">, </span><span style="color:#E6DB74">'Needed as source container to copy from.'</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2"> overlay: </span><span style="color:#A6E22E">first</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'button.overlay'</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2"> copy: </span><span style="color:#A6E22E">first</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'basic-button.copy'</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">	}),</span></span>
<span class="line"><span style="color:#F8F8F2">	({ </span><span style="color:#FD971F;font-style:italic">host</span><span style="color:#F8F8F2">, </span><span style="color:#FD971F;font-style:italic">code</span><span style="color:#F8F8F2">, </span><span style="color:#FD971F;font-style:italic">copy</span><span style="color:#F8F8F2"> }) </span><span style="color:#66D9EF;font-style:italic">=&gt;</span><span style="color:#F8F8F2"> ({</span></span>
<span class="line"><span style="color:#F8F8F2"> host: </span><span style="color:#A6E22E">toggleAttribute</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'collapsed'</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2"> overlay: </span><span style="color:#A6E22E">on</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'click'</span><span style="color:#F8F8F2">, () </span><span style="color:#66D9EF;font-style:italic">=&gt;</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2"> host.collapsed </span><span style="color:#F92672">=</span><span style="color:#AE81FF"> false</span></span>
<span class="line"><span style="color:#F8F8F2"> }),</span></span>
<span class="line"><span style="color:#F8F8F2"> copy: </span><span style="color:#A6E22E">copyToClipboard</span><span style="color:#F8F8F2">(code, {</span></span>
<span class="line"><span style="color:#F8F8F2"> success: copy?.</span><span style="color:#A6E22E">getAttribute</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'copy-success'</span><span style="color:#F8F8F2">) </span><span style="color:#F92672">||</span><span style="color:#E6DB74"> 'Copied!'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2"> error:</span></span>
<span class="line"><span style="color:#F8F8F2"> copy?.</span><span style="color:#A6E22E">getAttribute</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'copy-error'</span><span style="color:#F8F8F2">) </span><span style="color:#F92672">||</span></span>
<span class="line"><span style="color:#E6DB74"> 'Error trying to copy to clipboard!'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2"> }),</span></span>
<span class="line"><span style="color:#F8F8F2">	}),</span></span>
<span class="line"><span style="color:#F8F8F2">)</span></span>
<span class="line"></span></code></pre></module-scrollarea><basic-button class="copy" copy-success="Copied!" copy-error="Error trying to copy to clipboard!" ><button type="button" class="secondary small"><span class="label">Copy</span></button></basic-button><button type="button" class="overlay" aria-expanded="false" aria-controls="codeblock_module-codeblock-ts" > Expand </button>
</module-codeblock></div><details title="Source code" src="./sources/module-codeblock.html"><summary>Source code</summary><module-lazyload src="./sources/module-codeblock.html"><card-callout><p class="loading" role="status" aria-live="polite">Loading...</p><p class="error" role="alert" aria-live="assertive" hidden="true"></p></card-callout><div class="content"></div></module-lazyload></details></module-demo><h4 id="tag-name"><a name="tag-name" class="anchor" href="#tag-name"><span class="title">Tag Name</span><span class="permalink">#</span></a></h4><p><code>module-codeblock</code></p><h4 id="reactive-properties"><a name="reactive-properties" class="anchor" href="#reactive-properties"><span class="title">Reactive Properties</span><span class="permalink">#</span></a></h4><module-scrollarea orientation="horizontal"><table><thead><tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>collapsed</code></td><td><code>boolean</code></td><td><code>false</code></td><td>Whether the code block is collapsed (<code>collapsed</code> attribute on host)</td></tr></tbody></table></module-scrollarea><h4 id="descendant-elements"><a name="descendant-elements" class="anchor" href="#descendant-elements"><span class="title">Descendant Elements</span><span class="permalink">#</span></a></h4><module-scrollarea orientation="horizontal"><table><thead><tr><th>Selector</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>first('code')</code></td><td><code>HTMLElement</code></td><td><strong>required</strong></td><td>Source container used for copy-to-clipboard</td></tr><tr><td><code>first('button.overlay')</code></td><td><code>HTMLButtonElement</code></td><td>optional</td><td>Expands the block by setting <code>collapsed = false</code></td></tr><tr><td><code>first('basic-button.copy')</code></td><td><code>Component&lt;BasicButtonProps&gt;</code></td><td>optional</td><td>Copy trigger; reads <code>copy-success</code> and <code>copy-error</code> messages</td></tr></tbody></table></module-scrollarea>