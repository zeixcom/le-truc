function N(Z){return typeof Z==="function"}function ZZ(Z){return N(Z)&&Z.constructor.name==="AsyncFunction"}function qZ(Z){return N(Z)&&Z.constructor.name!=="AsyncFunction"}function b(Z,J){return Object.prototype.toString.call(Z)===`[object ${J}]`}function R(Z){return b(Z,"Object")}function V6(Z,J=(X)=>X!=null){return Array.isArray(Z)&&Z.every(J)}function s(Z){return typeof Z==="string"?`"${Z}"`:!!Z&&typeof Z==="object"?JSON.stringify(Z):String(Z)}class QZ extends Error{constructor(Z){super(`[${Z}] Circular dependency detected`);this.name="CircularDependencyError"}}class LZ extends TypeError{constructor(Z){super(`[${Z}] Signal value cannot be null or undefined`);this.name="NullishSignalValueError"}}class JZ extends Error{constructor(Z){super(`[${Z}] Signal value is unset`);this.name="UnsetSignalValueError"}}class MZ extends TypeError{constructor(Z,J){super(`[${Z}] Signal value ${s(J)} is invalid`);this.name="InvalidSignalValueError"}}class _Z extends TypeError{constructor(Z,J){super(`[${Z}] Callback ${s(J)} is invalid`);this.name="InvalidCallbackError"}}class TZ extends Error{constructor(Z){super(`[${Z}] Active owner is required`);this.name="RequiredOwnerError"}}class BZ extends Error{constructor(Z,J,X){super(`[${Z}] Could not add key "${J}"${X?` with value ${JSON.stringify(X)}`:""} because it already exists`);this.name="DuplicateKeyError"}}function F(Z,J,X){if(J==null)throw new LZ(Z);if(X&&!X(J))throw new MZ(Z,J)}function UZ(Z,J){if(J==null)throw new JZ(Z)}function k(Z,J,X=N){if(!X(J))throw new _Z(Z,J)}var l="State",r="Memo",n="Task",XZ="Sensor",g="List",u="Collection",t="Store",p=0,bZ=1,P=2,NZ=4,y=8,O=null,d=null,SZ=[],A=0,tZ=!1,$Z=(Z,J)=>Z===J,aZ=(Z,J)=>!1;function x6(Z,J){let X=J.sourcesTail;if(X){let $=J.sources;while($){if($===Z)return!0;if($===X)break;$=$.nextSource}}return!1}function x(Z,J){let X=J.sourcesTail;if(X?.source===Z)return;let $=null,W=J.flags&NZ;if(W){if($=X?X.nextSource:J.sources,$?.source===Z){J.sourcesTail=$;return}}let H=Z.sinksTail;if(H?.sink===J&&(!W||x6(H,J)))return;let q={source:Z,sink:J,nextSource:$,prevSink:H,nextSink:null};if(J.sourcesTail=Z.sinksTail=q,X)X.nextSource=q;else J.sources=q;if(H)H.nextSink=q;else Z.sinks=q}function A6(Z){let{source:J,nextSource:X,nextSink:$,prevSink:W}=Z;if($)$.prevSink=W;else J.sinksTail=W;if(W)W.nextSink=$;else J.sinks=$;if(!J.sinks){if(J.stop)J.stop(),J.stop=void 0;if("sources"in J&&J.sources){let H=J;H.sourcesTail=null,VZ(H)}}return X}function VZ(Z){let J=Z.sourcesTail,X=J?J.nextSource:Z.sources;while(X)X=A6(X);if(J)J.nextSource=null;else Z.sources=null}function I(Z,J=P){let X=Z.flags;if("sinks"in Z){if((X&(P|bZ))>=J)return;if(Z.flags=X|J,"controller"in Z&&Z.controller)Z.controller.abort(),Z.controller=void 0;for(let $=Z.sinks;$;$=$.nextSink)I($.sink,bZ)}else{if(X&P)return;Z.flags=P,SZ.push(Z)}}function FZ(Z,J){if(Z.equals(Z.value,J))return;Z.value=J;for(let X=Z.sinks;X;X=X.nextSink)I(X.sink);if(A===0)_()}function jZ(Z,J){if(!Z.cleanup)Z.cleanup=J;else if(Array.isArray(Z.cleanup))Z.cleanup.push(J);else Z.cleanup=[Z.cleanup,J]}function yZ(Z){if(!Z.cleanup)return;if(Array.isArray(Z.cleanup))for(let J=0;J<Z.cleanup.length;J++)Z.cleanup[J]();else Z.cleanup();Z.cleanup=null}function I6(Z){let J=O;O=Z,Z.sourcesTail=null,Z.flags=NZ;let X=!1;try{let $=Z.fn(Z.value);if(Z.error||!Z.equals($,Z.value))Z.value=$,Z.error=void 0,X=!0}catch($){X=!0,Z.error=$ instanceof Error?$:Error(String($))}finally{O=J,VZ(Z)}if(X){for(let $=Z.sinks;$;$=$.nextSink)if($.sink.flags&bZ)$.sink.flags|=P}Z.flags=p}function w6(Z){Z.controller?.abort();let J=new AbortController;Z.controller=J,Z.error=void 0;let X=O;O=Z,Z.sourcesTail=null,Z.flags=NZ;let $;try{$=Z.fn(Z.value,J.signal)}catch(W){Z.controller=void 0,Z.error=W instanceof Error?W:Error(String(W));return}finally{O=X,VZ(Z)}$.then((W)=>{if(J.signal.aborted)return;if(Z.controller=void 0,Z.error||!Z.equals(W,Z.value)){Z.value=W,Z.error=void 0;for(let H=Z.sinks;H;H=H.nextSink)I(H.sink);if(A===0)_()}},(W)=>{if(J.signal.aborted)return;Z.controller=void 0;let H=W instanceof Error?W:Error(String(W));if(!Z.error||H.name!==Z.error.name||H.message!==Z.error.message){Z.error=H;for(let q=Z.sinks;q;q=q.nextSink)I(q.sink);if(A===0)_()}}),Z.flags=p}function eZ(Z){yZ(Z);let J=O,X=d;O=d=Z,Z.sourcesTail=null,Z.flags=NZ;try{let $=Z.fn();if(typeof $==="function")jZ(Z,$)}finally{O=J,d=X,VZ(Z)}Z.flags=p}function T(Z){if(Z.flags&bZ)for(let J=Z.sources;J;J=J.nextSource){if("fn"in J.source)T(J.source);if(Z.flags&P)break}if(Z.flags&NZ)throw new QZ("controller"in Z?n:("value"in Z)?r:"Effect");if(Z.flags&P)if("controller"in Z)w6(Z);else if("value"in Z)I6(Z);else eZ(Z);else Z.flags=p}function _(){if(tZ)return;tZ=!0;try{for(let Z=0;Z<SZ.length;Z++){let J=SZ[Z];if(J.flags&P)T(J)}SZ.length=0}finally{tZ=!1}}function c(Z){A++;try{Z()}finally{if(A--,A===0)_()}}function o(Z){let J=O;O=null;try{return Z()}finally{O=J}}function K6(Z){let J=d,X={cleanup:null};d=X;try{let $=Z();if(typeof $==="function")jZ(X,$);let W=()=>yZ(X);if(J)jZ(J,W);return W}finally{d=J}}function f(Z,J){F(l,Z,J?.guard);let X={value:Z,sinks:null,sinksTail:null,equals:J?.equals??$Z,guard:J?.guard};return{[Symbol.toStringTag]:l,get(){if(O)x(X,O);return X.value},set($){F(l,$,X.guard),FZ(X,$)},update($){k(l,$);let W=$(X.value);F(l,W,X.guard),FZ(X,W)}}}function KZ(Z){return b(Z,l)}function a(Z,J,X){if(Object.is(Z,J))return!0;if(typeof Z!==typeof J)return!1;if(Z==null||typeof Z!=="object"||J==null||typeof J!=="object")return!1;if(!X)X=new WeakSet;if(X.has(Z)||X.has(J))throw new QZ("isEqual");X.add(Z),X.add(J);try{let $=Array.isArray(Z);if($!==Array.isArray(J))return!1;if($){let W=Z,H=J;if(W.length!==H.length)return!1;for(let q=0;q<W.length;q++)if(!a(W[q],H[q],X))return!1;return!0}if(R(Z)&&R(J)){let W=Object.keys(Z),H=Object.keys(J);if(W.length!==H.length)return!1;for(let q of W){if(!(q in J))return!1;if(!a(Z[q],J[q],X))return!1}return!0}return!1}finally{X.delete(Z),X.delete(J)}}function mZ(Z,J){if(Z.length!==J.length)return!1;for(let X=0;X<Z.length;X++)if(Z[X]!==J[X])return!1;return!0}function Z6(Z){let J=0,X=typeof Z==="function";return[typeof Z==="string"?()=>`${Z}${J++}`:X?($)=>Z($)||String(J++):()=>String(J++),X]}function R6(Z,J,X,$,W){let H=new WeakSet,q={},z={},K={},M=[],B=!1,j=new Map;for(let V=0;V<Z.length;V++){let Q=X[V];if(Q&&Z[V])j.set(Q,Z[V])}let G=new Set;for(let V=0;V<J.length;V++){let Q=J[V];if(Q===void 0)continue;let U=W?$(Q):X[V]??$(Q);if(G.has(U))throw new BZ(g,U,Q);if(M.push(U),G.add(U),!j.has(U))q[U]=Q,B=!0;else if(!a(j.get(U),Q,H))z[U]=Q,B=!0}for(let[V]of j)if(!G.has(V))K[V]=null,B=!0;if(!B&&!mZ(X,M))B=!0;return{add:q,change:z,remove:K,newKeys:M,changed:B}}function GZ(Z,J){F(g,Z,Array.isArray);let X=new Map,$=[],[W,H]=Z6(J?.keyConfig),q=()=>$.map((Q)=>X.get(Q)?.get()).filter((Q)=>Q!==void 0),z={fn:q,value:Z,flags:P,sources:null,sourcesTail:null,sinks:null,sinksTail:null,equals:a,error:void 0},K=(Q)=>{let U={};for(let D=0;D<Q.length;D++){let C=Q[D];if(C===void 0)continue;let Y=$[D];if(!Y)Y=W(C),$[D]=Y;U[Y]=C}return U},M=(Q)=>{let U=!1;for(let D in Q.add){let C=Q.add[D];F(`${g} item for key "${D}"`,C),X.set(D,f(C)),U=!0}if(Object.keys(Q.change).length)c(()=>{for(let D in Q.change){let C=Q.change[D];F(`${g} item for key "${D}"`,C);let Y=X.get(D);if(Y)Y.set(C)}});for(let D in Q.remove){X.delete(D);let C=$.indexOf(D);if(C!==-1)$.splice(C,1);U=!0}if(U)z.flags|=y;return Q.changed},B=J?.watched,j=B?()=>{if(O){if(!z.sinks)z.stop=B();x(z,O)}}:()=>{if(O)x(z,O)},G=K(Z);for(let Q in G){let U=G[Q];F(`${g} item for key "${Q}"`,U),X.set(Q,f(U))}z.value=Z,z.flags=0;let V={[Symbol.toStringTag]:g,[Symbol.isConcatSpreadable]:!0,*[Symbol.iterator](){for(let Q of $){let U=X.get(Q);if(U)yield U}},get length(){return j(),$.length},get(){if(j(),z.sources){if(z.flags){let Q=z.flags&y;if(z.value=o(q),Q){if(z.flags=P,T(z),z.error)throw z.error}else z.flags=p}}else if(T(z),z.error)throw z.error;return z.value},set(Q){let U=z.flags&P?q():z.value,D=R6(U,Q,$,W,H);if(D.changed){$=D.newKeys,M(D),z.flags|=P;for(let C=z.sinks;C;C=C.nextSink)I(C.sink);if(A===0)_()}},update(Q){V.set(Q(V.get()))},at(Q){return X.get($[Q])},keys(){return j(),$.values()},byKey(Q){return X.get(Q)},keyAt(Q){return $[Q]},indexOfKey(Q){return $.indexOf(Q)},add(Q){let U=W(Q);if(X.has(U))throw new BZ(g,U,Q);if(!$.includes(U))$.push(U);F(`${g} item for key "${U}"`,Q),X.set(U,f(Q)),z.flags|=P|y;for(let D=z.sinks;D;D=D.nextSink)I(D.sink);if(A===0)_();return U},remove(Q){let U=typeof Q==="number"?$[Q]:Q;if(X.delete(U)){let C=typeof Q==="number"?Q:$.indexOf(U);if(C>=0)$.splice(C,1);z.flags|=P|y;for(let Y=z.sinks;Y;Y=Y.nextSink)I(Y.sink);if(A===0)_()}},sort(Q){let D=$.map((C)=>[C,X.get(C)?.get()]).sort(N(Q)?(C,Y)=>Q(C[1],Y[1]):(C,Y)=>String(C[1]).localeCompare(String(Y[1]))).map(([C])=>C);if(!mZ($,D)){$=D,z.flags|=P;for(let C=z.sinks;C;C=C.nextSink)I(C.sink);if(A===0)_()}},splice(Q,U,...D){let C=$.length,Y=Q<0?Math.max(0,C+Q):Math.min(Q,C),L=Math.max(0,Math.min(U??Math.max(0,C-Math.max(0,Y)),C-Y)),S={},h={};for(let v=0;v<L;v++){let WZ=Y+v,nZ=$[WZ];if(nZ){let U6=X.get(nZ);if(U6)h[nZ]=U6.get()}}let rZ=$.slice(0,Y);for(let v of D){let WZ=W(v);if(X.has(WZ)&&!(WZ in h))throw new BZ(g,WZ,v);rZ.push(WZ),S[WZ]=v}rZ.push(...$.slice(Y+L));let M6=!!(Object.keys(S).length||Object.keys(h).length);if(M6){M({add:S,change:{},remove:h,changed:M6}),$=rZ,z.flags|=P;for(let v=z.sinks;v;v=v.nextSink)I(v.sink);if(A===0)_()}return Object.values(h)},deriveCollection(Q){return EZ(V,Q)}};return V}function DZ(Z){return b(Z,g)}function i(Z,J){if(k(r,Z,qZ),J?.value!==void 0)F(r,J.value,J?.guard);let X={fn:Z,value:J?.value,flags:P,sources:null,sourcesTail:null,sinks:null,sinksTail:null,equals:J?.equals??$Z,error:void 0,stop:void 0},$=J?.watched,W=$?()=>{if(O){if(!X.sinks)X.stop=$(()=>{X.flags|=P;for(let H=X.sinks;H;H=H.nextSink)I(H.sink);if(A===0)_()});x(X,O)}}:()=>{if(O)x(X,O)};return{[Symbol.toStringTag]:r,get(){if(W(),T(X),X.error)throw X.error;return UZ(r,X.value),X.value}}}function HZ(Z){return b(Z,r)}function CZ(Z,J){if(k(n,Z,ZZ),J?.value!==void 0)F(n,J.value,J?.guard);let X={fn:Z,value:J?.value,sources:null,sourcesTail:null,sinks:null,sinksTail:null,flags:P,equals:J?.equals??$Z,controller:void 0,error:void 0,stop:void 0},$=J?.watched,W=$?()=>{if(O){if(!X.sinks)X.stop=$(()=>{X.flags|=P;for(let H=X.sinks;H;H=H.nextSink)I(H.sink);if(A===0)_()});x(X,O)}}:()=>{if(O)x(X,O)};return{[Symbol.toStringTag]:n,get(){if(W(),T(X),X.error)throw X.error;return UZ(n,X.value),X.value},isPending(){return!!X.controller},abort(){X.controller?.abort(),X.controller=void 0}}}function fZ(Z){return b(Z,n)}function EZ(Z,J){if(k(u,J),!L6(Z))throw TypeError(`[${u}] Invalid collection source: expected a List or Collection`);let X=ZZ(J),$=new Map,W=[],H=(V)=>{let Q=X?CZ(async(U,D)=>{let C=Z.byKey(V)?.get();if(C==null)return U;return J(C,D)}):i(()=>{let U=Z.byKey(V)?.get();if(U==null)return;return J(U)});$.set(V,Q)};function q(V){if(!mZ(W,V)){let Q=new Set(W),U=new Set(V);for(let D of W)if(!U.has(D))$.delete(D);for(let D of V)if(!Q.has(D))H(D);W=V,M.flags|=y}}function z(){q(Array.from(Z.keys()));let V=[];for(let Q of W)try{let U=$.get(Q)?.get();if(U!=null)V.push(U)}catch(U){if(!(U instanceof JZ))throw U}return V}let M={fn:z,value:[],flags:P,sources:null,sourcesTail:null,sinks:null,sinksTail:null,equals:(V,Q)=>{if(V.length!==Q.length)return!1;for(let U=0;U<V.length;U++)if(V[U]!==Q[U])return!1;return!0},error:void 0};function B(){if(M.sources){if(M.flags)if(M.value=o(z),M.flags&y){if(M.flags=P,T(M),M.error)throw M.error}else M.flags=p}else if(M.sinks){if(T(M),M.error)throw M.error}else M.value=o(z)}let j=Array.from(o(()=>Z.keys()));for(let V of j)H(V);W=j;let G={[Symbol.toStringTag]:u,[Symbol.isConcatSpreadable]:!0,*[Symbol.iterator](){for(let V of W){let Q=$.get(V);if(Q)yield Q}},get length(){if(O)x(M,O);return B(),W.length},keys(){if(O)x(M,O);return B(),W.values()},get(){if(O)x(M,O);return B(),M.value},at(V){return $.get(W[V])},byKey(V){return $.get(V)},keyAt(V){return W[V]},indexOfKey(V){return W.indexOf(V)},deriveCollection(V){return EZ(G,V)}};return G}function G6(Z,J){let X=J?.value??[];if(X.length)F(u,X,Array.isArray);k(u,Z,qZ);let $=new Map,W=[],H=new Map,[q,z]=Z6(J?.keyConfig),K=(Q)=>H.get(Q)??(z?q(Q):void 0),M=J?.createItem??f;function B(){let Q=[];for(let U of W)try{let D=$.get(U)?.get();if(D!=null)Q.push(D)}catch(D){if(!(D instanceof JZ))throw D}return Q}let j={fn:B,value:X,flags:P,sources:null,sourcesTail:null,sinks:null,sinksTail:null,equals:aZ,error:void 0};for(let Q of X){let U=q(Q);$.set(U,M(Q)),H.set(Q,U),W.push(U)}j.value=X,j.flags=P;function G(){if(O){if(!j.sinks)j.stop=Z((Q)=>{let{add:U,change:D,remove:C}=Q;if(!U?.length&&!D?.length&&!C?.length)return;let Y=!1;c(()=>{if(U)for(let L of U){let S=q(L);if($.set(S,M(L)),H.set(L,S),!W.includes(S))W.push(S);Y=!0}if(D)for(let L of D){let S=K(L);if(!S)continue;let h=$.get(S);if(h&&KZ(h))H.delete(h.get()),h.set(L),H.set(L,S)}if(C)for(let L of C){let S=K(L);if(!S)continue;H.delete(L),$.delete(S);let h=W.indexOf(S);if(h!==-1)W.splice(h,1);Y=!0}j.flags=P|(Y?y:0);for(let L=j.sinks;L;L=L.nextSink)I(L.sink)})});x(j,O)}}let V={[Symbol.toStringTag]:u,[Symbol.isConcatSpreadable]:!0,*[Symbol.iterator](){for(let Q of W){let U=$.get(Q);if(U)yield U}},get length(){return G(),W.length},keys(){return G(),W.values()},get(){if(G(),j.sources){if(j.flags){let Q=j.flags&y;if(j.value=o(B),Q){if(j.flags=P,T(j),j.error)throw j.error}else j.flags=p}}else if(T(j),j.error)throw j.error;return j.value},at(Q){return $.get(W[Q])},byKey(Q){return $.get(Q)},keyAt(Q){return W[Q]},indexOfKey(Q){return W.indexOf(Q)},deriveCollection(Q){return EZ(V,Q)}};return V}function J6(Z){return b(Z,u)}function L6(Z){return DZ(Z)||J6(Z)}function xZ(Z){k("Effect",Z);let J={fn:Z,flags:P,sources:null,sourcesTail:null,cleanup:null},X=()=>{yZ(J),J.fn=void 0,J.flags=p,J.sourcesTail=null,VZ(J)};if(d)jZ(d,X);return eZ(J),X}function D6(Z,J){if(!d)throw new TZ("match");let{ok:X,err:$=console.error,nil:W}=J,H,q=!1,z=Array(Z.length);for(let M=0;M<Z.length;M++)try{z[M]=Z[M].get()}catch(B){if(B instanceof JZ){q=!0;continue}if(!H)H=[];H.push(B instanceof Error?B:Error(String(B)))}let K;try{if(q)K=W?.();else if(H)K=$(H);else K=X(z)}catch(M){$([M instanceof Error?M:Error(String(M))])}if(typeof K==="function")return K;if(K instanceof Promise){let M=d,B=new AbortController;jZ(M,()=>B.abort()),K.then((j)=>{if(!B.signal.aborted&&typeof j==="function")jZ(M,j)}).catch((j)=>{$([j instanceof Error?j:Error(String(j))])})}}function hZ(Z,J){if(k(XZ,Z,qZ),J?.value!==void 0)F(XZ,J.value,J?.guard);let X={value:J?.value,sinks:null,sinksTail:null,equals:J?.equals??$Z,guard:J?.guard,stop:void 0};return{[Symbol.toStringTag]:XZ,get(){if(O){if(!X.sinks)X.stop=Z(($)=>{F(XZ,$,X.guard),FZ(X,$)});x(X,O)}return UZ(XZ,X.value),X.value}}}function _6(Z,J){let X=R(Z)||Array.isArray(Z),$=R(J)||Array.isArray(J);if(!X||!$){let j=!Object.is(Z,J);return{changed:j,add:j&&$?J:{},change:{},remove:j&&X?Z:{}}}let W=new WeakSet,H={},q={},z={},K=!1,M=Object.keys(Z),B=Object.keys(J);for(let j of B)if(j in Z){if(!a(Z[j],J[j],W))q[j]=J[j],K=!0}else H[j]=J[j],K=!0;for(let j of M)if(!(j in J))z[j]=void 0,K=!0;return{add:H,change:q,remove:z,changed:K}}function AZ(Z,J){F(t,Z,R);let X=new Map,$=(B,j)=>{if(F(`${t} for key "${B}"`,j),Array.isArray(j))X.set(B,GZ(j));else if(R(j))X.set(B,AZ(j));else X.set(B,f(j))},W=()=>{let B={};return X.forEach((j,G)=>{B[G]=j.get()}),B},H={fn:W,value:Z,flags:P,sources:null,sourcesTail:null,sinks:null,sinksTail:null,equals:a,error:void 0},q=(B)=>{let j=!1;for(let G in B.add)$(G,B.add[G]),j=!0;if(Object.keys(B.change).length)c(()=>{for(let G in B.change){let V=B.change[G];F(`${t} for key "${G}"`,V);let Q=X.get(G);if(Q)if(R(V)!==IZ(Q))$(G,V),j=!0;else Q.set(V)}});for(let G in B.remove)X.delete(G),j=!0;if(j)H.flags|=y;return B.changed},z=J?.watched,K=z?()=>{if(O){if(!H.sinks)H.stop=z();x(H,O)}}:()=>{if(O)x(H,O)};for(let B of Object.keys(Z))$(B,Z[B]);let M={[Symbol.toStringTag]:t,[Symbol.isConcatSpreadable]:!1,*[Symbol.iterator](){for(let B of Array.from(X.keys())){let j=X.get(B);if(j)yield[B,j]}},keys(){return K(),X.keys()},byKey(B){return X.get(B)},get(){if(K(),H.sources){if(H.flags){let B=H.flags&y;if(H.value=o(W),B){if(H.flags=P,T(H),H.error)throw H.error}else H.flags=p}}else if(T(H),H.error)throw H.error;return H.value},set(B){let j=H.flags&P?W():H.value,G=_6(j,B);if(q(G)){H.flags|=P;for(let V=H.sinks;V;V=V.nextSink)I(V.sink);if(A===0)_()}},update(B){M.set(B(M.get()))},add(B,j){if(X.has(B))throw new BZ(t,B,j);$(B,j),H.flags|=P|y;for(let G=H.sinks;G;G=G.nextSink)I(G.sink);if(A===0)_();return B},remove(B){if(X.delete(B)){H.flags|=P|y;for(let G=H.sinks;G;G=G.nextSink)I(G.sink);if(A===0)_()}}};return new Proxy(M,{get(B,j){if(j in B)return Reflect.get(B,j);if(typeof j!=="symbol")return B.byKey(j)},has(B,j){if(j in B)return!0;return B.byKey(String(j))!==void 0},ownKeys(B){return Array.from(B.keys())},getOwnPropertyDescriptor(B,j){if(j in B)return Reflect.getOwnPropertyDescriptor(B,j);if(typeof j==="symbol")return;let G=B.byKey(String(j));return G?{enumerable:!0,configurable:!0,writable:!0,value:G}:void 0}})}function IZ(Z){return b(Z,t)}function kZ(Z,J){return ZZ(Z)?CZ(Z,J):i(Z,J)}function C6(Z){if(wZ(Z))return Z;if(Z==null||N(Z)||e(Z))throw new MZ("createMutableSignal",Z);if(V6(Z))return GZ(Z);if(R(Z))return AZ(Z);return f(Z)}function gZ(Z){return HZ(Z)||fZ(Z)}function e(Z){let J=[l,r,n,XZ,g,u,t],X=Object.prototype.toString.call(Z).slice(8,-1);return J.includes(X)}function wZ(Z){return KZ(Z)||IZ(Z)||DZ(Z)}var X6=!1,T6="debug";var S6="warn",OZ="error",b6=new Set(["constructor","prototype"]),y6=new Set(["id","class","className","title","role","style","dataset","lang","dir","hidden","children","innerHTML","outerHTML","textContent","innerText"]),m6=(Z)=>Z?`#${Z}`:"",E6=(Z)=>Z?.length?`.${Array.from(Z).join(".")}`:"";var $6=(Z)=>Z.localName.includes("-"),H6=(Z)=>$6(Z)&&Z.matches(":not(:defined)"),w=(Z)=>Z?`<${Z.localName}${m6(Z.id)}${E6(Z.classList)}>`:"<unknown>";var PZ=(Z,J,X=T6)=>{if(X6||[OZ,S6].includes(X))console[X](J,Z);return Z},O6=(Z)=>{if(b6.has(Z))return`Property name "${Z}" is a reserved word`;if(y6.has(Z))return`Property name "${Z}" conflicts with inherited HTMLElement property`;return null};class P6 extends Error{constructor(Z,J){super(`Circular dependency detected in selection signal for component ${w(Z)} with selector "${J}"`);this.name="CircularMutationError"}}class pZ extends TypeError{constructor(Z){super(`Invalid component name "${Z}". Custom element names must contain a hyphen, start with a lowercase letter, and contain only lowercase letters, numbers, and hyphens.`);this.name="InvalidComponentNameError"}}class vZ extends TypeError{constructor(Z,J,X){super(`Invalid property name "${J}" for component <${Z}>. ${X}`);this.name="InvalidPropertyNameError"}}class dZ extends TypeError{constructor(Z,J){super(`Invalid effects in component ${w(Z)}. Effects must be a record of effects for UI elements or the component, or a Promise that resolves to effects.`);if(this.name="InvalidEffectsError",J)this.cause=J}}class RZ extends Error{constructor(Z,J,X){super(`Missing required element <${J}> in component ${w(Z)}. ${X}`);this.name="MissingElementError"}}class uZ extends Error{constructor(Z,J){super(`Timeout waiting for: [${J.join(", ")}] in component ${w(Z)}.`);this.name="DependencyTimeoutError"}}class cZ extends TypeError{constructor(Z,J,X){super(`Expected reactives passed from ${w(Z)} to ${w(J)} to be a record of signals, reactive property names or functions. Got ${s(X)}.`);this.name="InvalidReactivesError"}}class oZ extends TypeError{constructor(Z,J){super(`Target ${w(Z)} is not a custom element in ${J}.`);this.name="InvalidCustomElementError"}}var W6=Symbol("RESET"),f6=(Z,J="")=>{return{a:"attribute ",c:"class ",d:"dataset ",h:"inner HTML",m:"method call ",p:"property ",s:"style property ",t:"text content"}[Z]+J},Q6=(Z,J,X)=>{let $=[],W=(H)=>{let q=H(Z,J);if(q)$.push(q)};if(Array.isArray(X))for(let H of X)W(H);else W(X);return()=>{$.forEach((H)=>H()),$.length=0}},h6=(Z,J,X)=>{let $=new Map,W=(z)=>{for(let K of z){let M=Q6(Z,K,X);if(M)$.set(K,M)}},H=(z)=>{for(let K of z)$.get(K)?.(),$.delete(K)},q=xZ(()=>{let z=new Set(J.get()),K=[],M=[];for(let B of z)if(!$.has(B))K.push(B);for(let B of $.keys())if(!z.has(B))M.push(B);W(K),H(M)});return()=>{for(let z of $.values())z();$.clear(),q()}},B6=(Z,J)=>{if(!R(J))throw new dZ(Z.host);let X=[],$=Object.keys(J);for(let W of $){let H=W;if(!J[H])continue;let q=Array.isArray(J[H])?J[H]:[J[H]];if(HZ(Z[H]))X.push(h6(Z.host,Z[H],q));else if(Z[H]){let z=Q6(Z.host,Z[H],q);if(z)X.push(z)}}return()=>{for(let W of X)W();X.length=0}},k6=(Z,J,X,$)=>{try{return typeof Z==="string"?J[Z]:e(Z)?Z.get():N(Z)?Z(X):W6}catch(W){if($)PZ(W,`Failed to resolve value of ${s(Z)}${$?` for ${$}`:""} in ${w(X)}${J!==X?` in ${w(J)}`:""}`,OZ);return W6}},m=(Z,J)=>(X,$)=>{let{op:W,name:H="",read:q,update:z}=J,K=f6(W,H),M=(G)=>()=>{if(X6&&X.debug)PZ($,`${G} ${K} of ${w($)} in ${w(X)}`);J.resolve?.($)},B=(G)=>(V)=>{PZ(V,`Failed to ${G} ${K} of ${w($)} in ${w(X)}`,OZ),J.reject?.(V)},j=q($);return xZ(()=>{let G=k6(Z,X,$,K),V=G===W6?j:G===null?J.delete?null:j:G;if(J.delete&&V===null)try{J.delete($),M("delete")()}catch(Q){B("delete")(Q)}else if(V!=null){let Q=q($);if(Object.is(V,Q))return;try{z($,V),M("update")()}catch(U){B("update")(U)}}})};var YZ=(Z)=>N(Z)&&Z.length>=2,g6=(Z)=>N(Z),E=(Z,J)=>g6(J)?J(Z):J,p6=(Z,J)=>(X)=>{let $=Z(X);return typeof $==="string"&&YZ(J)?J(X,$):$??E(X,J)};var v6=50,d6=(Z)=>{let J=new Set;if(Z.includes("."))J.add("class");if(Z.includes("#"))J.add("id");if(Z.includes("[")){let X=Z.split("[");for(let $=1;$<X.length;$++){let W=X[$];if(!W.includes("]"))continue;let H=W.split("=")[0].trim().replace(/[^a-zA-Z0-9_-]/g,"");if(H)J.add(H)}}return[...J]};function Y6(Z,J){return i(()=>Array.from(Z.querySelectorAll(J)),{value:[],watched:(X)=>{let $={childList:!0,subtree:!0},W=d6(J);if(W.length)$.attributes=!0,$.attributeFilter=W;let H=new MutationObserver(()=>X());return H.observe(Z,$),()=>H.disconnect()}})}var N6=(Z)=>{let J=Z.shadowRoot??Z,X=new Set;function $(q,z){let K=J.querySelector(q);if(z!=null&&!K)throw new RZ(Z,q,z);if(K&&H6(K))X.add(K.localName);return K??void 0}function W(q,z){let K=Y6(J,q),M=K.get();if(z!=null&&!M.length)throw new RZ(Z,q,z);if(M.length){for(let B of M)if(H6(B))X.add(B.localName)}return K}return[{first:$,all:W},(q)=>{if(X.size){let z=Array.from(X);Promise.race([Promise.all(z.map((K)=>customElements.whenDefined(K))),new Promise((K,M)=>{setTimeout(()=>{M(new uZ(Z,z.filter((B)=>!customElements.get(B))))},v6)})]).then(q).catch(()=>{q()})}else q()}]};function u6(Z,J={},X=()=>({}),$=()=>({})){if(!Z.includes("-")||!Z.match(/^[a-z][a-z0-9-]*$/))throw new pZ(Z);for(let H of Object.keys(J)){let q=O6(H);if(q)throw new vZ(Z,H,q)}class W extends HTMLElement{debug;#Z;#X={};#J;static observedAttributes=Object.entries(J)?.filter(([,H])=>YZ(H)).map(([H])=>H)??[];connectedCallback(){let[H,q]=N6(this),z={...X(H),host:this};this.#Z=z,Object.freeze(this.#Z);let K=(B)=>{return N(B)},M=(B,j)=>{let G=YZ(j)?j(z,this.getAttribute(B)):K(j)?j(z):j;if(G!=null)this.#$(B,G)};for(let[B,j]of Object.entries(J)){if(j==null||B in this)continue;M(B,j)}q(()=>{this.#J=B6(z,$(z))})}disconnectedCallback(){if(N(this.#J))this.#J()}attributeChangedCallback(H,q,z){if(!this.#Z||z===q||gZ(this.#X[H]))return;let K=J[H];if(!YZ(K))return;let M=K(this.#Z,z,q);if(H in this)this[H]=M;else this.#$(H,M)}#$(H,q){let z=e(q)?q:N(q)?kZ(q):f(q),K=wZ(z);this.#X[H]=z,Object.defineProperty(this,H,{get:z.get,set:K?z.set:void 0,enumerable:!0,configurable:K})}}return customElements.define(Z,W),customElements.get(Z)}var iZ="context-request";class j6 extends Event{context;callback;subscribe;constructor(Z,J,X=!1){super(iZ,{bubbles:!0,composed:!0});this.context=Z,this.callback=J,this.subscribe=X}}var c6=(Z)=>(J)=>{let X=($)=>{let{context:W,callback:H}=$;if(typeof W==="string"&&Z.includes(W)&&N(H))$.stopImmediatePropagation(),H(()=>J[W])};return J.addEventListener(iZ,X),()=>J.removeEventListener(iZ,X)},o6=(Z,J)=>(X)=>{let $=()=>E(X,J);return X.host.dispatchEvent(new j6(Z,(W)=>{$=W})),i($)};var i6=(Z)=>{if(/^(mailto|tel):/i.test(Z))return!0;if(Z.includes("://"))try{let J=new URL(Z,window.location.origin);return["http:","https:","ftp:"].includes(J.protocol)}catch{return!1}return!0},s6=(Z,J,X)=>{if(/^on/i.test(J))throw Error(`Unsafe attribute: ${J}`);if(X=String(X).trim(),!i6(X))throw Error(`Unsafe URL for ${J}: ${X}`);Z.setAttribute(J,X)},l6=(Z,J=Z)=>m(J,{op:"a",name:Z,read:(X)=>X.getAttribute(Z),update:(X,$)=>{s6(X,Z,$)},delete:(X)=>{X.removeAttribute(Z)}}),r6=(Z,J=Z)=>m(J,{op:"a",name:Z,read:(X)=>X.hasAttribute(Z),update:(X,$)=>{X.toggleAttribute(Z,$)}});var n6=(Z,J=Z)=>m(J,{op:"c",name:Z,read:(X)=>X.classList.contains(Z),update:(X,$)=>{X.classList.toggle(Z,$)}});var lZ=new Set(["scroll","resize","mousewheel","touchstart","touchmove","wheel"]),z6=new Set,F6=new WeakMap,sZ,t6=()=>{sZ=void 0;let Z=Array.from(z6);z6.clear();for(let J of Z)F6.get(J)?.()},a6=()=>{if(sZ)cancelAnimationFrame(sZ);sZ=requestAnimationFrame(t6)},zZ=(Z,J)=>{F6.set(Z,J),z6.add(Z),a6()};var e6=(Z,J,X={})=>($,W)=>{if(!("passive"in X))X={...X,passive:lZ.has(Z)};let H=(q)=>{let z=()=>{let K=J(q);if(!R(K))return;c(()=>{for(let[M,B]of Object.entries(K))try{$[M]=B}catch(j){PZ(j,`Reactive property "${M}" on ${w($)} from event ${Z} on ${w(W)} could not be set, because it is read-only.`,OZ)}})};if(X.passive)zZ(W,z);else z()};return W.addEventListener(Z,H,X),()=>W.removeEventListener(Z,H)};var ZJ=(Z,J={})=>m(Z,{op:"h",read:(X)=>(X.shadowRoot||!J.shadowRootMode?X:null)?.innerHTML??"",update:(X,$)=>{let{shadowRootMode:W,allowScripts:H}=J;if(!$){if(X.shadowRoot)X.shadowRoot.innerHTML="<slot></slot>";return""}if(W&&!X.shadowRoot)X.attachShadow({mode:W});let q=X.shadowRoot||X;return zZ(X,()=>{if(q.innerHTML=$,H)q.querySelectorAll("script").forEach((z)=>{let K=document.createElement("script");K.appendChild(document.createTextNode(z.textContent??""));let M=z.getAttribute("type");if(M)K.setAttribute("type",M);q.appendChild(K),z.remove()})}),H?" with scripts":""}});var JJ=(Z)=>(J,X)=>{if(!$6(X))throw new oZ(X,`pass from ${w(J)}`);let $=N(Z)?Z(X):Z;if(!R($))throw new cZ(J,X,$);let W={},H=(q)=>{if(e(q))return q.get;return typeof q==="string"&&q in J?()=>J[q]:N(q)?q:void 0};for(let[q,z]of Object.entries($)){if(z==null)continue;let K=Object.getOwnPropertyDescriptor(X,q);if(!(q in X)||!K?.configurable)continue;let M=N(z)&&z.length===1?z(X):z,B=Array.isArray(M)&&M.length===2,j=H(B?M[0]:M),G=B&&N(M[1])?M[1]:void 0;if(!j)continue;W[q]=K,Object.defineProperty(X,q,{configurable:!0,enumerable:!0,get:j,set:G})}return()=>{Object.defineProperties(X,W)}};var XJ=(Z,J=Z)=>m(J,{op:"p",name:Z,read:(X)=>(Z in X)?X[Z]??null:null,update:(X,$)=>{X[Z]=$}}),$J=(Z)=>m(Z,{op:"p",name:"hidden",read:(J)=>!J.hidden,update:(J,X)=>{J.hidden=!X}});var HJ=(Z,J=Z)=>m(J,{op:"s",name:Z,read:(X)=>X.style.getPropertyValue(Z),update:(X,$)=>{X.style.setProperty(Z,$)},delete:(X)=>{X.style.removeProperty(Z)}});var WJ=(Z)=>m(Z,{op:"t",read:(J)=>J.textContent,update:(J,X)=>{Array.from(J.childNodes).filter(($)=>$.nodeType!==Node.COMMENT_NODE).forEach(($)=>$.remove()),J.append(document.createTextNode(X))}});var QJ=(Z,J,X)=>($)=>{let{host:W}=$,H=E($,Z),q=HZ($[J])?$[J].get():[$[J]],z=new Map,K=(M)=>{for(let B of q)if(B.contains(M))return B};return hZ((M)=>{for(let[B,j]of Object.entries(X)){let G={passive:lZ.has(B)},V=(Q)=>{let U=Q.target;if(!U)return;let D=K(U);if(!D)return;Q.stopPropagation();let C=()=>{try{let Y=j({event:Q,ui:$,target:D,prev:H});if(Y==null||Y instanceof Promise)return;if(!Object.is(Y,H))H=Y,M(Y)}catch(Y){throw Q.stopImmediatePropagation(),Y}};if(G.passive)zZ(W,C);else C()};z.set(B,V),W.addEventListener(B,V,G)}return()=>{if(z.size){for(let[B,j]of z)W.removeEventListener(B,j);z.clear()}}},{value:H})};var BJ=()=>(Z,J)=>J!=null&&J!=="false";var jJ=(Z)=>(J,X)=>{if((X??Z)==null)throw TypeError("asJSON: Value and fallback are both null or undefined");if(X==null)return E(J,Z);if(X==="")throw TypeError("Empty string is not valid JSON");let $;try{$=JSON.parse(X)}catch(W){throw SyntaxError(`Failed to parse JSON: ${String(W)}`,{cause:W})}return $??E(J,Z)};var q6=(Z,J)=>{if(J==null)return;let X=Z(J);return Number.isFinite(X)?X:void 0},zJ=(Z=0)=>(J,X)=>{if(X==null)return E(J,Z);let $=X.trim();if($.toLowerCase().startsWith("0x"))return q6((H)=>parseInt(H,16),$)??E(J,Z);let W=q6(parseFloat,X);return W!=null?Math.trunc(W):E(J,Z)},qJ=(Z=0)=>(J,X)=>q6(parseFloat,X)??E(J,Z);var MJ=(Z="")=>(J,X)=>X??E(J,Z),UJ=(Z)=>(J,X)=>{if(X==null)return Z[0];let $=X.toLowerCase();return Z.find((H)=>H.toLowerCase()===$)?X:Z[0]};export{s as valueString,m as updateElement,n6 as toggleClass,r6 as toggleAttribute,$J as show,WJ as setText,HJ as setStyle,XJ as setProperty,l6 as setAttribute,zZ as schedule,Q6 as runElementEffects,B6 as runEffects,o6 as requestContext,p6 as read,c6 as provideContexts,JJ as pass,e6 as on,D6 as match,fZ as isTask,IZ as isStore,KZ as isState,e as isSignal,R as isRecord,YZ as isParser,wZ as isMutableSignal,HZ as isMemo,DZ as isList,N as isFunction,a as isEqual,gZ as isComputed,J6 as isCollection,ZZ as isAsyncFunction,u6 as defineComponent,ZJ as dangerouslySetInnerHTML,CZ as createTask,AZ as createStore,f as createState,hZ as createSensor,K6 as createScope,C6 as createMutableSignal,i as createMemo,GZ as createList,QJ as createEventsSensor,Y6 as createElementsMemo,xZ as createEffect,kZ as createComputed,G6 as createCollection,c as batch,MJ as asString,qJ as asNumber,jJ as asJSON,zJ as asInteger,UJ as asEnum,BJ as asBoolean,LZ as NullishSignalValueError,RZ as MissingElementError,MZ as InvalidSignalValueError,cZ as InvalidReactivesError,vZ as InvalidPropertyNameError,dZ as InvalidEffectsError,oZ as InvalidCustomElementError,pZ as InvalidComponentNameError,_Z as InvalidCallbackError,uZ as DependencyTimeoutError,j6 as ContextRequestEvent,P6 as CircularMutationError,QZ as CircularDependencyError,iZ as CONTEXT_REQUEST};

//# debugId=E65E86BEB6927D4964756E2164756E21
