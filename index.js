function F(Z){return typeof Z==="function"}function a(Z){return F(Z)&&Z.constructor.name==="AsyncFunction"}function zZ(Z){return F(Z)&&Z.constructor.name!=="AsyncFunction"}function S(Z,J){return Object.prototype.toString.call(Z)===`[object ${J}]`}function w(Z){return S(Z,"Object")}function U6(Z,J=(X)=>X!=null){return Array.isArray(Z)&&Z.every(J)}function c(Z){return typeof Z==="string"?`"${Z}"`:!!Z&&typeof Z==="object"?JSON.stringify(Z):String(Z)}class WZ extends Error{constructor(Z){super(`[${Z}] Circular dependency detected`);this.name="CircularDependencyError"}}class RZ extends TypeError{constructor(Z){super(`[${Z}] Signal value cannot be null or undefined`);this.name="NullishSignalValueError"}}class e extends Error{constructor(Z){super(`[${Z}] Signal value is unset`);this.name="UnsetSignalValueError"}}class qZ extends TypeError{constructor(Z,J){super(`[${Z}] Signal value ${c(J)} is invalid`);this.name="InvalidSignalValueError"}}class _Z extends TypeError{constructor(Z,J){super(`[${Z}] Callback ${c(J)} is invalid`);this.name="InvalidCallbackError"}}class TZ extends Error{constructor(Z){super(`[${Z}] Active owner is required`);this.name="RequiredOwnerError"}}class QZ extends Error{constructor(Z,J,X){super(`[${Z}] Could not add key "${J}"${X?` with value ${JSON.stringify(X)}`:""} because it already exists`);this.name="DuplicateKeyError"}}function P(Z,J,X){if(J==null)throw new RZ(Z);if(X&&!X(J))throw new qZ(Z,J)}function MZ(Z,J){if(J==null)throw new e(Z)}function h(Z,J,X=F){if(!X(J))throw new _Z(Z,J)}var o="State",i="Memo",s="Task",ZZ="Sensor",k="List",d="Collection",l="Store",g=0,bZ=1,O=2,YZ=4,N=null,v=null,SZ=[],I=0,nZ=!1,JZ=(Z,J)=>Z===J,tZ=(Z,J)=>!1;function P6(Z,J){let X=J.sourcesTail;if(X){let $=J.sources;while($){if($===Z)return!0;if($===X)break;$=$.nextSource}}return!1}function A(Z,J){let X=J.sourcesTail;if(X?.source===Z)return;let $=null,W=J.flags&YZ;if(W){if($=X?X.nextSource:J.sources,$?.source===Z){J.sourcesTail=$;return}}let H=Z.sinksTail;if(H?.sink===J&&(!W||P6(H,J)))return;let q={source:Z,sink:J,nextSource:$,prevSink:H,nextSink:null};if(J.sourcesTail=Z.sinksTail=q,X)X.nextSource=q;else J.sources=q;if(H)H.nextSink=q;else Z.sinks=q}function A6(Z){let{source:J,nextSource:X,nextSink:$,prevSink:W}=Z;if($)$.prevSink=W;else J.sinksTail=W;if(W)W.nextSink=$;else J.sinks=$;if(!J.sinks&&J.stop)J.stop(),J.stop=void 0;return X}function FZ(Z){let J=Z.sourcesTail,X=J?J.nextSource:Z.sources;while(X)X=A6(X);if(J)J.nextSource=null;else Z.sources=null}function x(Z,J=O){let X=Z.flags;if("sinks"in Z){if((X&(O|bZ))>=J)return;if(Z.flags=X|J,"controller"in Z&&Z.controller)Z.controller.abort(),Z.controller=void 0;for(let $=Z.sinks;$;$=$.nextSink)x($.sink,bZ)}else{if(X&O)return;Z.flags=O,SZ.push(Z)}}function PZ(Z,J){if(Z.equals(Z.value,J))return;Z.value=J;for(let X=Z.sinks;X;X=X.nextSink)x(X.sink);if(I===0)_()}function BZ(Z,J){if(!Z.cleanup)Z.cleanup=J;else if(Array.isArray(Z.cleanup))Z.cleanup.push(J);else Z.cleanup=[Z.cleanup,J]}function yZ(Z){if(!Z.cleanup)return;if(Array.isArray(Z.cleanup))for(let J=0;J<Z.cleanup.length;J++)Z.cleanup[J]();else Z.cleanup();Z.cleanup=null}function I6(Z){let J=N;N=Z,Z.sourcesTail=null,Z.flags=YZ;let X=!1;try{let $=Z.fn(Z.value);if(Z.error||!Z.equals($,Z.value))Z.value=$,Z.error=void 0,X=!0}catch($){X=!0,Z.error=$ instanceof Error?$:Error(String($))}finally{N=J,FZ(Z)}if(X){for(let $=Z.sinks;$;$=$.nextSink)if($.sink.flags&bZ)$.sink.flags|=O}Z.flags=g}function x6(Z){Z.controller?.abort();let J=new AbortController;Z.controller=J,Z.error=void 0;let X=N;N=Z,Z.sourcesTail=null,Z.flags=YZ;let $;try{$=Z.fn(Z.value,J.signal)}catch(W){Z.controller=void 0,Z.error=W instanceof Error?W:Error(String(W));return}finally{N=X,FZ(Z)}$.then((W)=>{if(J.signal.aborted)return;if(Z.controller=void 0,Z.error||!Z.equals(W,Z.value)){Z.value=W,Z.error=void 0;for(let H=Z.sinks;H;H=H.nextSink)x(H.sink);if(I===0)_()}},(W)=>{if(J.signal.aborted)return;Z.controller=void 0;let H=W instanceof Error?W:Error(String(W));if(!Z.error||H.name!==Z.error.name||H.message!==Z.error.message){Z.error=H;for(let q=Z.sinks;q;q=q.nextSink)x(q.sink);if(I===0)_()}}),Z.flags=g}function aZ(Z){yZ(Z);let J=N,X=v;N=v=Z,Z.sourcesTail=null,Z.flags=YZ;try{let $=Z.fn();if(typeof $==="function")BZ(Z,$)}finally{N=J,v=X,FZ(Z)}Z.flags=g}function E(Z){if(Z.flags&bZ)for(let J=Z.sources;J;J=J.nextSource){if("fn"in J.source)E(J.source);if(Z.flags&O)break}if(Z.flags&YZ)throw new WZ("controller"in Z?s:("value"in Z)?i:"Effect");if(Z.flags&O)if("controller"in Z)x6(Z);else if("value"in Z)I6(Z);else aZ(Z);else Z.flags=g}function _(){if(nZ)return;nZ=!0;try{for(let Z=0;Z<SZ.length;Z++){let J=SZ[Z];if(J.flags&O)E(J)}SZ.length=0}finally{nZ=!1}}function u(Z){I++;try{Z()}finally{if(I--,I===0)_()}}function XZ(Z){let J=N;N=null;try{return Z()}finally{N=J}}function K6(Z){let J=v,X={cleanup:null};v=X;try{let $=Z();if(typeof $==="function")BZ(X,$);let W=()=>yZ(X);if(J)BZ(J,W);return W}finally{v=J}}function m(Z,J){P(o,Z,J?.guard);let X={value:Z,sinks:null,sinksTail:null,equals:J?.equals??JZ,guard:J?.guard};return{[Symbol.toStringTag]:o,get(){if(N)A(X,N);return X.value},set($){P(o,$,X.guard),PZ(X,$)},update($){h(o,$);let W=$(X.value);P(o,W,X.guard),PZ(X,W)}}}function UZ(Z){return S(Z,o)}function r(Z,J,X){if(Object.is(Z,J))return!0;if(typeof Z!==typeof J)return!1;if(Z==null||typeof Z!=="object"||J==null||typeof J!=="object")return!1;if(!X)X=new WeakSet;if(X.has(Z)||X.has(J))throw new WZ("isEqual");X.add(Z),X.add(J);try{let $=Array.isArray(Z);if($!==Array.isArray(J))return!1;if($){let W=Z,H=J;if(W.length!==H.length)return!1;for(let q=0;q<W.length;q++)if(!r(W[q],H[q],X))return!1;return!0}if(w(Z)&&w(J)){let W=Object.keys(Z),H=Object.keys(J);if(W.length!==H.length)return!1;for(let q of W){if(!(q in J))return!1;if(!r(Z[q],J[q],X))return!1}return!0}return!1}finally{X.delete(Z),X.delete(J)}}function EZ(Z,J){if(Z.length!==J.length)return!1;for(let X=0;X<Z.length;X++)if(Z[X]!==J[X])return!1;return!0}function eZ(Z){let J=0,X=typeof Z==="function";return[typeof Z==="string"?()=>`${Z}${J++}`:X?($)=>Z($)||String(J++):()=>String(J++),X]}function L6(Z,J,X,$,W){let H=new WeakSet,q={},z={},G={},M=[],B=!1,j=new Map;for(let K=0;K<Z.length;K++){let Q=X[K];if(Q&&Z[K])j.set(Q,Z[K])}let V=new Set;for(let K=0;K<J.length;K++){let Q=J[K];if(Q===void 0)continue;let U=W?$(Q):X[K]??$(Q);if(V.has(U))throw new QZ(k,U,Q);if(M.push(U),V.add(U),!j.has(U))q[U]=Q,B=!0;else if(!r(j.get(U),Q,H))z[U]=Q,B=!0}for(let[K]of j)if(!V.has(K))G[K]=null,B=!0;if(!B&&!EZ(X,M))B=!0;return{add:q,change:z,remove:G,newKeys:M,changed:B}}function KZ(Z,J){P(k,Z,Array.isArray);let X=new Map,$=[],[W,H]=eZ(J?.keyConfig),q=()=>$.map((Q)=>X.get(Q)?.get()).filter((Q)=>Q!==void 0),z={fn:q,value:Z,flags:O,sources:null,sourcesTail:null,sinks:null,sinksTail:null,equals:r,error:void 0},G=(Q)=>{let U={};for(let D=0;D<Q.length;D++){let C=Q[D];if(C===void 0)continue;let Y=$[D];if(!Y)Y=W(C),$[D]=Y;U[Y]=C}return U},M=(Q)=>{let U=!1;for(let D in Q.add){let C=Q.add[D];P(`${k} item for key "${D}"`,C),X.set(D,m(C)),U=!0}if(Object.keys(Q.change).length)u(()=>{for(let D in Q.change){let C=Q.change[D];P(`${k} item for key "${D}"`,C);let Y=X.get(D);if(Y)Y.set(C)}});for(let D in Q.remove){X.delete(D);let C=$.indexOf(D);if(C!==-1)$.splice(C,1);U=!0}if(U)z.sources=null,z.sourcesTail=null;return Q.changed},B=J?.watched,j=B?()=>{if(N){if(!z.sinks)z.stop=B();A(z,N)}}:()=>{if(N)A(z,N)},V=G(Z);for(let Q in V){let U=V[Q];P(`${k} item for key "${Q}"`,U),X.set(Q,m(U))}z.value=Z,z.flags=0;let K={[Symbol.toStringTag]:k,[Symbol.isConcatSpreadable]:!0,*[Symbol.iterator](){for(let Q of $){let U=X.get(Q);if(U)yield U}},get length(){return j(),$.length},get(){if(j(),z.sources){if(z.flags)z.value=XZ(q),z.flags=g}else if(E(z),z.error)throw z.error;return z.value},set(Q){let U=z.flags&O?q():z.value,D=L6(U,Q,$,W,H);if(D.changed){$=D.newKeys,M(D),z.flags|=O;for(let C=z.sinks;C;C=C.nextSink)x(C.sink);if(I===0)_()}},update(Q){K.set(Q(K.get()))},at(Q){return X.get($[Q])},keys(){return j(),$.values()},byKey(Q){return X.get(Q)},keyAt(Q){return $[Q]},indexOfKey(Q){return $.indexOf(Q)},add(Q){let U=W(Q);if(X.has(U))throw new QZ(k,U,Q);if(!$.includes(U))$.push(U);P(`${k} item for key "${U}"`,Q),X.set(U,m(Q)),z.sources=null,z.sourcesTail=null,z.flags|=O;for(let D=z.sinks;D;D=D.nextSink)x(D.sink);if(I===0)_();return U},remove(Q){let U=typeof Q==="number"?$[Q]:Q;if(X.delete(U)){let C=typeof Q==="number"?Q:$.indexOf(U);if(C>=0)$.splice(C,1);z.sources=null,z.sourcesTail=null,z.flags|=O;for(let Y=z.sinks;Y;Y=Y.nextSink)x(Y.sink);if(I===0)_()}},sort(Q){let D=$.map((C)=>[C,X.get(C)?.get()]).sort(F(Q)?(C,Y)=>Q(C[1],Y[1]):(C,Y)=>String(C[1]).localeCompare(String(Y[1]))).map(([C])=>C);if(!EZ($,D)){$=D,z.flags|=O;for(let C=z.sinks;C;C=C.nextSink)x(C.sink);if(I===0)_()}},splice(Q,U,...D){let C=$.length,Y=Q<0?Math.max(0,C+Q):Math.min(Q,C),R=Math.max(0,Math.min(U??Math.max(0,C-Math.max(0,Y)),C-Y)),T={},f={};for(let p=0;p<R;p++){let HZ=Y+p,rZ=$[HZ];if(rZ){let M6=X.get(rZ);if(M6)f[rZ]=M6.get()}}let lZ=$.slice(0,Y);for(let p of D){let HZ=W(p);if(X.has(HZ)&&!(HZ in f))throw new QZ(k,HZ,p);lZ.push(HZ),T[HZ]=p}lZ.push(...$.slice(Y+R));let q6=!!(Object.keys(T).length||Object.keys(f).length);if(q6){M({add:T,change:{},remove:f,changed:q6}),$=lZ,z.flags|=O;for(let p=z.sinks;p;p=p.nextSink)x(p.sink);if(I===0)_()}return Object.values(f)},deriveCollection(Q){return mZ(K,Q)}};return K}function GZ(Z){return S(Z,k)}function n(Z,J){if(h(i,Z,zZ),J?.value!==void 0)P(i,J.value,J?.guard);let X={fn:Z,value:J?.value,flags:O,sources:null,sourcesTail:null,sinks:null,sinksTail:null,equals:J?.equals??JZ,error:void 0,stop:void 0},$=J?.watched,W=$?()=>{if(N){if(!X.sinks)X.stop=$(()=>{X.flags|=O;for(let H=X.sinks;H;H=H.nextSink)x(H.sink);if(I===0)_()});A(X,N)}}:()=>{if(N)A(X,N)};return{[Symbol.toStringTag]:i,get(){if(W(),E(X),X.error)throw X.error;return MZ(i,X.value),X.value}}}function $Z(Z){return S(Z,i)}function VZ(Z,J){if(h(s,Z,a),J?.value!==void 0)P(s,J.value,J?.guard);let X={fn:Z,value:J?.value,sources:null,sourcesTail:null,sinks:null,sinksTail:null,flags:O,equals:J?.equals??JZ,controller:void 0,error:void 0,stop:void 0},$=J?.watched,W=$?()=>{if(N){if(!X.sinks)X.stop=$(()=>{X.flags|=O;for(let H=X.sinks;H;H=H.nextSink)x(H.sink);if(I===0)_()});A(X,N)}}:()=>{if(N)A(X,N)};return{[Symbol.toStringTag]:s,get(){if(W(),E(X),X.error)throw X.error;return MZ(s,X.value),X.value},isPending(){return!!X.controller},abort(){X.controller?.abort(),X.controller=void 0}}}function fZ(Z){return S(Z,s)}function mZ(Z,J){if(h(d,J),!w6(Z))throw TypeError(`[${d}] Invalid collection source: expected a List or Collection`);let X=a(J),$=new Map,W=[],H=(K)=>{let Q=X?VZ(async(U,D)=>{let C=Z.byKey(K)?.get();if(C==null)return U;return J(C,D)}):n(()=>{let U=Z.byKey(K)?.get();if(U==null)return;return J(U)});$.set(K,Q)};function q(){let K=Array.from(Z.keys());if(!EZ(W,K)){let Q=new Set(W),U=new Set(K);for(let D of W)if(!U.has(D))$.delete(D);for(let D of K)if(!Q.has(D))H(D);W=K,M.sources=null,M.sourcesTail=null}}function z(){q();let K=[];for(let Q of W)try{let U=$.get(Q)?.get();if(U!=null)K.push(U)}catch(U){if(!(U instanceof e))throw U}return K}let M={fn:z,value:[],flags:O,sources:null,sourcesTail:null,sinks:null,sinksTail:null,equals:(K,Q)=>{if(K.length!==Q.length)return!1;for(let U=0;U<K.length;U++)if(K[U]!==Q[U])return!1;return!0},error:void 0};function B(){if(M.sources){if(M.flags){if(M.value=XZ(z),M.flags=g,!M.sources){if(M.flags=O,E(M),M.error)throw M.error}}}else if(E(M),M.error)throw M.error}let j=Array.from(Z.keys());for(let K of j)H(K);W=j;let V={[Symbol.toStringTag]:d,[Symbol.isConcatSpreadable]:!0,*[Symbol.iterator](){for(let K of W){let Q=$.get(K);if(Q)yield Q}},get length(){if(N)A(M,N);return B(),W.length},keys(){if(N)A(M,N);return B(),W.values()},get(){if(N)A(M,N);return B(),M.value},at(K){return $.get(W[K])},byKey(K){return $.get(K)},keyAt(K){return W[K]},indexOfKey(K){return W.indexOf(K)},deriveCollection(K){return mZ(V,K)}};return V}function G6(Z,J){let X=J?.value??[];if(X.length)P(d,X,Array.isArray);h(d,Z,zZ);let $=new Map,W=[],H=new Map,[q,z]=eZ(J?.keyConfig),G=(Q)=>H.get(Q)??(z?q(Q):void 0),M=J?.createItem??m;function B(){let Q=[];for(let U of W)try{let D=$.get(U)?.get();if(D!=null)Q.push(D)}catch(D){if(!(D instanceof e))throw D}return Q}let j={fn:B,value:X,flags:O,sources:null,sourcesTail:null,sinks:null,sinksTail:null,equals:tZ,error:void 0};for(let Q of X){let U=q(Q);$.set(U,M(Q)),H.set(Q,U),W.push(U)}j.value=X,j.flags=O;function V(){if(N){if(!j.sinks)j.stop=Z((Q)=>{let{add:U,change:D,remove:C}=Q;if(!U?.length&&!D?.length&&!C?.length)return;let Y=!1;u(()=>{if(U)for(let R of U){let T=q(R);if($.set(T,M(R)),H.set(R,T),!W.includes(T))W.push(T);Y=!0}if(D)for(let R of D){let T=G(R);if(!T)continue;let f=$.get(T);if(f&&UZ(f))H.delete(f.get()),f.set(R),H.set(R,T)}if(C)for(let R of C){let T=G(R);if(!T)continue;H.delete(R),$.delete(T);let f=W.indexOf(T);if(f!==-1)W.splice(f,1);Y=!0}if(Y)j.sources=null,j.sourcesTail=null;j.flags=O;for(let R=j.sinks;R;R=R.nextSink)x(R.sink)})});A(j,N)}}let K={[Symbol.toStringTag]:d,[Symbol.isConcatSpreadable]:!0,*[Symbol.iterator](){for(let Q of W){let U=$.get(Q);if(U)yield U}},get length(){return V(),W.length},keys(){return V(),W.values()},get(){if(V(),j.sources){if(j.flags)j.value=XZ(B),j.flags=g}else if(E(j),j.error)throw j.error;return j.value},at(Q){return $.get(W[Q])},byKey(Q){return $.get(Q)},keyAt(Q){return W[Q]},indexOfKey(Q){return W.indexOf(Q)},deriveCollection(Q){return mZ(K,Q)}};return K}function Z6(Z){return S(Z,d)}function w6(Z){return GZ(Z)||Z6(Z)}function AZ(Z){h("Effect",Z);let J={fn:Z,flags:O,sources:null,sourcesTail:null,cleanup:null},X=()=>{yZ(J),J.fn=void 0,J.flags=g,J.sourcesTail=null,FZ(J)};if(v)BZ(v,X);return aZ(J),X}function V6(Z,J){if(!v)throw new TZ("match");let{ok:X,err:$=console.error,nil:W}=J,H,q=!1,z=Array(Z.length);for(let M=0;M<Z.length;M++)try{z[M]=Z[M].get()}catch(B){if(B instanceof e){q=!0;continue}if(!H)H=[];H.push(B instanceof Error?B:Error(String(B)))}let G;try{if(q)G=W?.();else if(H)G=$(H);else G=X(z)}catch(M){$([M instanceof Error?M:Error(String(M))])}if(typeof G==="function")return G;if(G instanceof Promise){let M=v,B=new AbortController;BZ(M,()=>B.abort()),G.then((j)=>{if(!B.signal.aborted&&typeof j==="function")BZ(M,j)}).catch((j)=>{$([j instanceof Error?j:Error(String(j))])})}}function hZ(Z,J){if(h(ZZ,Z,zZ),J?.value!==void 0)P(ZZ,J.value,J?.guard);let X={value:J?.value,sinks:null,sinksTail:null,equals:J?.equals??JZ,guard:J?.guard,stop:void 0};return{[Symbol.toStringTag]:ZZ,get(){if(N){if(!X.sinks)X.stop=Z(($)=>{P(ZZ,$,X.guard),PZ(X,$)});A(X,N)}return MZ(ZZ,X.value),X.value}}}function R6(Z,J){let X=w(Z)||Array.isArray(Z),$=w(J)||Array.isArray(J);if(!X||!$){let j=!Object.is(Z,J);return{changed:j,add:j&&$?J:{},change:{},remove:j&&X?Z:{}}}let W=new WeakSet,H={},q={},z={},G=!1,M=Object.keys(Z),B=Object.keys(J);for(let j of B)if(j in Z){if(!r(Z[j],J[j],W))q[j]=J[j],G=!0}else H[j]=J[j],G=!0;for(let j of M)if(!(j in J))z[j]=void 0,G=!0;return{add:H,change:q,remove:z,changed:G}}function IZ(Z,J){P(l,Z,w);let X=new Map,$=(B,j)=>{if(P(`${l} for key "${B}"`,j),Array.isArray(j))X.set(B,KZ(j));else if(w(j))X.set(B,IZ(j));else X.set(B,m(j))},W=()=>{let B={};return X.forEach((j,V)=>{B[V]=j.get()}),B},H={fn:W,value:Z,flags:O,sources:null,sourcesTail:null,sinks:null,sinksTail:null,equals:r,error:void 0},q=(B)=>{let j=!1;for(let V in B.add)$(V,B.add[V]),j=!0;if(Object.keys(B.change).length)u(()=>{for(let V in B.change){let K=B.change[V];P(`${l} for key "${V}"`,K);let Q=X.get(V);if(Q)if(w(K)!==xZ(Q))$(V,K),j=!0;else Q.set(K)}});for(let V in B.remove)X.delete(V),j=!0;if(j)H.sources=null,H.sourcesTail=null;return B.changed},z=J?.watched,G=z?()=>{if(N){if(!H.sinks)H.stop=z();A(H,N)}}:()=>{if(N)A(H,N)};for(let B of Object.keys(Z))$(B,Z[B]);let M={[Symbol.toStringTag]:l,[Symbol.isConcatSpreadable]:!1,*[Symbol.iterator](){for(let B of Array.from(X.keys())){let j=X.get(B);if(j)yield[B,j]}},keys(){return G(),X.keys()},byKey(B){return X.get(B)},get(){if(G(),H.sources){if(H.flags)H.value=XZ(W),H.flags=g}else if(E(H),H.error)throw H.error;return H.value},set(B){let j=H.flags&O?W():H.value,V=R6(j,B);if(q(V)){H.flags|=O;for(let K=H.sinks;K;K=K.nextSink)x(K.sink);if(I===0)_()}},update(B){M.set(B(M.get()))},add(B,j){if(X.has(B))throw new QZ(l,B,j);$(B,j),H.sources=null,H.sourcesTail=null,H.flags|=O;for(let V=H.sinks;V;V=V.nextSink)x(V.sink);if(I===0)_();return B},remove(B){if(X.delete(B)){H.sources=null,H.sourcesTail=null,H.flags|=O;for(let V=H.sinks;V;V=V.nextSink)x(V.sink);if(I===0)_()}}};return new Proxy(M,{get(B,j){if(j in B)return Reflect.get(B,j);if(typeof j!=="symbol")return B.byKey(j)},has(B,j){if(j in B)return!0;return B.byKey(String(j))!==void 0},ownKeys(B){return Array.from(B.keys())},getOwnPropertyDescriptor(B,j){if(j in B)return Reflect.getOwnPropertyDescriptor(B,j);if(typeof j==="symbol")return;let V=B.byKey(String(j));return V?{enumerable:!0,configurable:!0,writable:!0,value:V}:void 0}})}function xZ(Z){return S(Z,l)}function DZ(Z,J){return a(Z)?VZ(Z,J):n(Z,J)}function D6(Z){if(LZ(Z))return Z;if(Z==null||F(Z)||t(Z))throw new qZ("createMutableSignal",Z);if(U6(Z))return KZ(Z);if(w(Z))return IZ(Z);return m(Z)}function kZ(Z){return $Z(Z)||fZ(Z)}function t(Z){let J=[o,i,s,ZZ,k,d,l],X=Object.prototype.toString.call(Z).slice(8,-1);return J.includes(X)}function LZ(Z){return UZ(Z)||xZ(Z)||GZ(Z)}var J6=!1,_6="debug";var T6="warn",CZ="error",S6=new Set(["constructor","prototype"]),b6=new Set(["id","class","className","title","role","style","dataset","lang","dir","hidden","children","innerHTML","outerHTML","textContent","innerText"]),y6=(Z)=>Z?`#${Z}`:"",E6=(Z)=>Z?.length?`.${Array.from(Z).join(".")}`:"";var X6=(Z)=>Z.localName.includes("-"),$6=(Z)=>X6(Z)&&Z.matches(":not(:defined)"),L=(Z)=>Z?`<${Z.localName}${y6(Z.id)}${E6(Z.classList)}>`:"<unknown>";var NZ=(Z,J,X=_6)=>{if(J6||[CZ,T6].includes(X))console[X](J,Z);return Z},C6=(Z)=>{if(S6.has(Z))return`Property name "${Z}" is a reserved word`;if(b6.has(Z))return`Property name "${Z}" conflicts with inherited HTMLElement property`;return null};class N6 extends Error{constructor(Z,J){super(`Circular dependency detected in selection signal for component ${L(Z)} with selector "${J}"`);this.name="CircularMutationError"}}class gZ extends TypeError{constructor(Z){super(`Invalid component name "${Z}". Custom element names must contain a hyphen, start with a lowercase letter, and contain only lowercase letters, numbers, and hyphens.`);this.name="InvalidComponentNameError"}}class pZ extends TypeError{constructor(Z,J,X){super(`Invalid property name "${J}" for component <${Z}>. ${X}`);this.name="InvalidPropertyNameError"}}class vZ extends TypeError{constructor(Z,J){super(`Invalid effects in component ${L(Z)}. Effects must be a record of effects for UI elements or the component, or a Promise that resolves to effects.`);if(this.name="InvalidEffectsError",J)this.cause=J}}class wZ extends Error{constructor(Z,J,X){super(`Missing required element <${J}> in component ${L(Z)}. ${X}`);this.name="MissingElementError"}}class dZ extends Error{constructor(Z,J){super(`Timeout waiting for: [${J.join(", ")}] in component ${L(Z)}.`);this.name="DependencyTimeoutError"}}class uZ extends TypeError{constructor(Z,J,X){super(`Expected reactives passed from ${L(Z)} to ${L(J)} to be a record of signals, reactive property names or functions. Got ${c(X)}.`);this.name="InvalidReactivesError"}}class cZ extends TypeError{constructor(Z,J){super(`Target ${L(Z)} is not a custom element in ${J}.`);this.name="InvalidCustomElementError"}}var H6=Symbol("RESET"),m6=(Z,J="")=>{return{a:"attribute ",c:"class ",d:"dataset ",h:"inner HTML",m:"method call ",p:"property ",s:"style property ",t:"text content"}[Z]+J},W6=(Z,J,X)=>{let $=[],W=(H)=>{let q=H(Z,J);if(q)$.push(q)};if(Array.isArray(X))for(let H of X)W(H);else W(X);return()=>{$.forEach((H)=>H()),$.length=0}},f6=(Z,J,X)=>{let $=new Map,W=(z)=>{for(let G of z){let M=W6(Z,G,X);if(M)$.set(G,M)}},H=(z)=>{for(let G of z)$.get(G)?.(),$.delete(G)},q=AZ(()=>{let z=new Set(J.get()),G=[],M=[];for(let B of z)if(!$.has(B))G.push(B);for(let B of $.keys())if(!z.has(B))M.push(B);W(G),H(M)});return()=>{for(let z of $.values())z();$.clear(),q()}},Q6=(Z,J)=>{if(!w(J))throw new vZ(Z.host);let X=[],$=Object.keys(J);for(let W of $){let H=W;if(!J[H])continue;let q=Array.isArray(J[H])?J[H]:[J[H]];if($Z(Z[H]))X.push(f6(Z.host,Z[H],q));else if(Z[H]){let z=W6(Z.host,Z[H],q);if(z)X.push(z)}}return()=>{for(let W of X)W();X.length=0}},h6=(Z,J,X,$)=>{try{return typeof Z==="string"?J[Z]:t(Z)?Z.get():F(Z)?Z(X):H6}catch(W){if($)NZ(W,`Failed to resolve value of ${c(Z)}${$?` for ${$}`:""} in ${L(X)}${J!==X?` in ${L(J)}`:""}`,CZ);return H6}},b=(Z,J)=>(X,$)=>{let{op:W,name:H="",read:q,update:z}=J,G=m6(W,H),M=(V)=>()=>{if(J6&&X.debug)NZ($,`${V} ${G} of ${L($)} in ${L(X)}`);J.resolve?.($)},B=(V)=>(K)=>{NZ(K,`Failed to ${V} ${G} of ${L($)} in ${L(X)}`,CZ),J.reject?.(K)},j=q($);return AZ(()=>{let V=h6(Z,X,$,G),K=V===H6?j:V===null?J.delete?null:j:V;if(J.delete&&K===null)try{J.delete($),M("delete")()}catch(Q){B("delete")(Q)}else if(K!=null){let Q=q($);if(Object.is(K,Q))return;try{z($,K),M("update")()}catch(U){B("update")(U)}}})};var OZ=(Z)=>F(Z)&&Z.length>=2,k6=(Z)=>F(Z),y=(Z,J)=>k6(J)?J(Z):J,g6=(Z,J)=>(X)=>{let $=Z(X);return typeof $==="string"&&OZ(J)?J(X,$):$??y(X,J)};var p6=50,v6=(Z)=>{let J=new Set;if(Z.includes("."))J.add("class");if(Z.includes("#"))J.add("id");if(Z.includes("[")){let X=Z.split("[");for(let $=1;$<X.length;$++){let W=X[$];if(!W.includes("]"))continue;let H=W.split("=")[0].trim().replace(/[^a-zA-Z0-9_-]/g,"");if(H)J.add(H)}}return[...J]};function O6(Z,J){return n((X)=>{let $=new Set(Array.from(Z.querySelectorAll(J))),W=[],H=[];for(let q of $)if(!X.current.has(q))W.push(q);for(let q of X.current)if(!$.has(q))H.push(q);return{current:$,added:W,removed:H}},{value:{current:new Set,added:[],removed:[]},watched:(X)=>{let $={childList:!0,subtree:!0},W=v6(J);if(W.length)$.attributes=!0,$.attributeFilter=W;let H=new MutationObserver(()=>X());return H.observe(Z,$),()=>H.disconnect()}})}function d6(Z,J){let X=O6(Z,J);return()=>Array.from(X.get().current)}var Y6=(Z)=>{let J=Z.shadowRoot??Z,X=new Set;function $(q,z){let G=J.querySelector(q);if(z!=null&&!G)throw new wZ(Z,q,z);if(G&&$6(G))X.add(G.localName);return G??void 0}function W(q,z){let G=O6(J,q),M=G.get().current;if(z!=null&&!M.size)throw new wZ(Z,q,z);if(M.size){for(let B of M)if($6(B))X.add(B.localName)}return n(()=>Array.from(G.get().current),{value:[]})}return[{first:$,all:W},(q)=>{if(X.size){let z=Array.from(X);Promise.race([Promise.all(z.map((G)=>customElements.whenDefined(G))),new Promise((G,M)=>{setTimeout(()=>{M(new dZ(Z,z.filter((B)=>!customElements.get(B))))},p6)})]).then(q).catch(()=>{q()})}else q()}]};function u6(Z,J={},X=()=>({}),$=()=>({})){if(!Z.includes("-")||!Z.match(/^[a-z][a-z0-9-]*$/))throw new gZ(Z);for(let H of Object.keys(J)){let q=C6(H);if(q)throw new pZ(Z,H,q)}class W extends HTMLElement{debug;#Z;#X={};#J;static observedAttributes=Object.entries(J)?.filter(([,H])=>OZ(H)).map(([H])=>H)??[];connectedCallback(){let[H,q]=Y6(this),z={...X(H),host:this};this.#Z=z,Object.freeze(this.#Z);let G=(B)=>{return F(B)},M=(B,j)=>{let V=OZ(j)?j(z,this.getAttribute(B)):G(j)?j(z):j;if(V!=null)this.#$(B,V)};for(let[B,j]of Object.entries(J)){if(j==null||B in this)continue;M(B,j)}q(()=>{this.#J=Q6(z,$(z))})}disconnectedCallback(){if(F(this.#J))this.#J()}attributeChangedCallback(H,q,z){if(!this.#Z||z===q||kZ(this.#X[H]))return;let G=J[H];if(!OZ(G))return;let M=G(this.#Z,z,q);if(H in this)this[H]=M;else this.#$(H,M)}#$(H,q){let z=t(q)?q:F(q)?DZ(q):m(q),G=LZ(z);this.#X[H]=z,Object.defineProperty(this,H,{get:z.get,set:G?z.set:void 0,enumerable:!0,configurable:G})}}return customElements.define(Z,W),customElements.get(Z)}var oZ="context-request";class B6 extends Event{context;callback;subscribe;constructor(Z,J,X=!1){super(oZ,{bubbles:!0,composed:!0});this.context=Z,this.callback=J,this.subscribe=X}}var c6=(Z)=>(J)=>{let X=($)=>{let{context:W,callback:H}=$;if(typeof W==="string"&&Z.includes(W)&&F(H))$.stopImmediatePropagation(),H(()=>J[W])};return J.addEventListener(oZ,X),()=>J.removeEventListener(oZ,X)},o6=(Z,J)=>(X)=>{let $=()=>y(X,J);return X.host.dispatchEvent(new B6(Z,(W)=>{$=W})),DZ($)};var i6=(Z)=>{if(/^(mailto|tel):/i.test(Z))return!0;if(Z.includes("://"))try{let J=new URL(Z,window.location.origin);return["http:","https:","ftp:"].includes(J.protocol)}catch{return!1}return!0},s6=(Z,J,X)=>{if(/^on/i.test(J))throw Error(`Unsafe attribute: ${J}`);if(X=String(X).trim(),!i6(X))throw Error(`Unsafe URL for ${J}: ${X}`);Z.setAttribute(J,X)},l6=(Z,J=Z)=>b(J,{op:"a",name:Z,read:(X)=>X.getAttribute(Z),update:(X,$)=>{s6(X,Z,$)},delete:(X)=>{X.removeAttribute(Z)}}),r6=(Z,J=Z)=>b(J,{op:"a",name:Z,read:(X)=>X.hasAttribute(Z),update:(X,$)=>{X.toggleAttribute(Z,$)}});var n6=(Z,J=Z)=>b(J,{op:"c",name:Z,read:(X)=>X.classList.contains(Z),update:(X,$)=>{X.classList.toggle(Z,$)}});var sZ=new Set(["scroll","resize","mousewheel","touchstart","touchmove","wheel"]),j6=new Set,F6=new WeakMap,iZ,t6=()=>{iZ=void 0;let Z=Array.from(j6);j6.clear();for(let J of Z)F6.get(J)?.()},a6=()=>{if(iZ)cancelAnimationFrame(iZ);iZ=requestAnimationFrame(t6)},jZ=(Z,J)=>{F6.set(Z,J),j6.add(Z),a6()};var e6=(Z,J,X={})=>($,W)=>{if(!("passive"in X))X={...X,passive:sZ.has(Z)};let H=(q)=>{let z=()=>{let G=J(q);if(!w(G))return;u(()=>{for(let[M,B]of Object.entries(G))try{$[M]=B}catch(j){NZ(j,`Reactive property "${M}" on ${L($)} from event ${Z} on ${L(W)} could not be set, because it is read-only.`,CZ)}})};if(X.passive)jZ(W,z);else z()};return W.addEventListener(Z,H,X),()=>W.removeEventListener(Z,H)};var ZJ=(Z,J={})=>b(Z,{op:"h",read:(X)=>(X.shadowRoot||!J.shadowRootMode?X:null)?.innerHTML??"",update:(X,$)=>{let{shadowRootMode:W,allowScripts:H}=J;if(!$){if(X.shadowRoot)X.shadowRoot.innerHTML="<slot></slot>";return""}if(W&&!X.shadowRoot)X.attachShadow({mode:W});let q=X.shadowRoot||X;return jZ(X,()=>{if(q.innerHTML=$,H)q.querySelectorAll("script").forEach((z)=>{let G=document.createElement("script");G.appendChild(document.createTextNode(z.textContent??""));let M=z.getAttribute("type");if(M)G.setAttribute("type",M);q.appendChild(G),z.remove()})}),H?" with scripts":""}});var JJ=(Z)=>(J,X)=>{if(!X6(X))throw new cZ(X,`pass from ${L(J)}`);let $=F(Z)?Z(X):Z;if(!w($))throw new uZ(J,X,$);let W={},H=(q)=>{if(t(q))return q.get;return typeof q==="string"&&q in J?()=>J[q]:F(q)?q:void 0};for(let[q,z]of Object.entries($)){if(z==null)continue;let G=Object.getOwnPropertyDescriptor(X,q);if(!(q in X)||!G?.configurable)continue;let M=F(z)&&z.length===1?z(X):z,B=Array.isArray(M)&&M.length===2,j=H(B?M[0]:M),V=B&&F(M[1])?M[1]:void 0;if(!j)continue;W[q]=G,Object.defineProperty(X,q,{configurable:!0,enumerable:!0,get:j,set:V})}return()=>{Object.defineProperties(X,W)}};var XJ=(Z,J=Z)=>b(J,{op:"p",name:Z,read:(X)=>(Z in X)?X[Z]??null:null,update:(X,$)=>{X[Z]=$}}),$J=(Z)=>b(Z,{op:"p",name:"hidden",read:(J)=>!J.hidden,update:(J,X)=>{J.hidden=!X}});var HJ=(Z,J=Z)=>b(J,{op:"s",name:Z,read:(X)=>X.style.getPropertyValue(Z),update:(X,$)=>{X.style.setProperty(Z,$)},delete:(X)=>{X.style.removeProperty(Z)}});var WJ=(Z)=>b(Z,{op:"t",read:(J)=>J.textContent,update:(J,X)=>{Array.from(J.childNodes).filter(($)=>$.nodeType!==Node.COMMENT_NODE).forEach(($)=>$.remove()),J.append(document.createTextNode(X))}});var QJ=(Z,J,X)=>($)=>{let{host:W}=$,H=y($,Z),q=$Z($[J])?$[J].get():[$[J]],z=new Map,G=(M)=>{for(let B of q)if(B.contains(M))return B};return hZ((M)=>{for(let[B,j]of Object.entries(X)){let V={passive:sZ.has(B)},K=(Q)=>{let U=Q.target;if(!U)return;let D=G(U);if(!D)return;Q.stopPropagation();let C=()=>{try{let Y=j({event:Q,ui:$,target:D,prev:H});if(Y==null||Y instanceof Promise)return;if(!Object.is(Y,H))H=Y,M(Y)}catch(Y){throw Q.stopImmediatePropagation(),Y}};if(V.passive)jZ(W,C);else C()};z.set(B,K),W.addEventListener(B,K,V)}return()=>{if(z.size){for(let[B,j]of z)W.removeEventListener(B,j);z.clear()}}},{value:H})};var BJ=()=>(Z,J)=>J!=null&&J!=="false";var jJ=(Z)=>(J,X)=>{if((X??Z)==null)throw TypeError("asJSON: Value and fallback are both null or undefined");if(X==null)return y(J,Z);if(X==="")throw TypeError("Empty string is not valid JSON");let $;try{$=JSON.parse(X)}catch(W){throw SyntaxError(`Failed to parse JSON: ${String(W)}`,{cause:W})}return $??y(J,Z)};var z6=(Z,J)=>{if(J==null)return;let X=Z(J);return Number.isFinite(X)?X:void 0},zJ=(Z=0)=>(J,X)=>{if(X==null)return y(J,Z);let $=X.trim();if($.toLowerCase().startsWith("0x"))return z6((H)=>parseInt(H,16),$)??y(J,Z);let W=z6(parseFloat,X);return W!=null?Math.trunc(W):y(J,Z)},qJ=(Z=0)=>(J,X)=>z6(parseFloat,X)??y(J,Z);var MJ=(Z="")=>(J,X)=>X??y(J,Z),UJ=(Z)=>(J,X)=>{if(X==null)return Z[0];let $=X.toLowerCase();return Z.find((H)=>H.toLowerCase()===$)?X:Z[0]};export{c as valueString,b as updateElement,n6 as toggleClass,r6 as toggleAttribute,$J as show,WJ as setText,HJ as setStyle,XJ as setProperty,l6 as setAttribute,jZ as schedule,W6 as runElementEffects,Q6 as runEffects,o6 as requestContext,g6 as read,c6 as provideContexts,JJ as pass,e6 as on,V6 as match,fZ as isTask,xZ as isStore,UZ as isState,t as isSignal,w as isRecord,OZ as isParser,LZ as isMutableSignal,$Z as isMemo,GZ as isList,F as isFunction,r as isEqual,kZ as isComputed,Z6 as isCollection,a as isAsyncFunction,d6 as getWatchedElements,u6 as defineComponent,ZJ as dangerouslySetInnerHTML,VZ as createTask,IZ as createStore,m as createState,hZ as createSensor,K6 as createScope,D6 as createMutableSignal,n as createMemo,KZ as createList,QJ as createEventsSensor,AZ as createEffect,DZ as createComputed,G6 as createCollection,u as batch,MJ as asString,qJ as asNumber,jJ as asJSON,zJ as asInteger,UJ as asEnum,BJ as asBoolean,RZ as NullishSignalValueError,wZ as MissingElementError,qZ as InvalidSignalValueError,uZ as InvalidReactivesError,pZ as InvalidPropertyNameError,vZ as InvalidEffectsError,cZ as InvalidCustomElementError,gZ as InvalidComponentNameError,_Z as InvalidCallbackError,dZ as DependencyTimeoutError,B6 as ContextRequestEvent,N6 as CircularMutationError,WZ as CircularDependencyError,oZ as CONTEXT_REQUEST};

//# debugId=BBB307FFCABE51A864756E2164756E21
