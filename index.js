function F(Z){return typeof Z==="function"}function XZ(Z){return F(Z)&&Z.constructor.name==="AsyncFunction"}function UZ(Z){return F(Z)&&Z.constructor.name!=="AsyncFunction"}function S(Z,J){return Object.prototype.toString.call(Z)===`[object ${J}]`}function L(Z){return S(Z,"Object")}function D6(Z,J=(X)=>X!=null){return Array.isArray(Z)&&Z.every(J)}function l(Z){return typeof Z==="string"?`"${Z}"`:!!Z&&typeof Z==="object"?JSON.stringify(Z):String(Z)}class QZ extends Error{constructor(Z){super(`[${Z}] Circular dependency detected`);this.name="CircularDependencyError"}}class bZ extends TypeError{constructor(Z){super(`[${Z}] Signal value cannot be null or undefined`);this.name="NullishSignalValueError"}}class $Z extends Error{constructor(Z){super(`[${Z}] Signal value is unset`);this.name="UnsetSignalValueError"}}class VZ extends TypeError{constructor(Z,J){super(`[${Z}] Signal value ${l(J)} is invalid`);this.name="InvalidSignalValueError"}}class yZ extends TypeError{constructor(Z,J){super(`[${Z}] Callback ${l(J)} is invalid`);this.name="InvalidCallbackError"}}class mZ extends Error{constructor(Z){super(`[${Z}] Signal is read-only`);this.name="ReadonlySignalError"}}class EZ extends Error{constructor(Z){super(`[${Z}] Active owner is required`);this.name="RequiredOwnerError"}}class jZ extends Error{constructor(Z,J,X){super(`[${Z}] Could not add key "${J}"${X?` with value ${JSON.stringify(X)}`:""} because it already exists`);this.name="DuplicateKeyError"}}function Y(Z,J,X){if(J==null)throw new bZ(Z);if(X&&!X(J))throw new VZ(Z,J)}function GZ(Z,J){if(J==null)throw new $Z(Z)}function k(Z,J,X=F){if(!X(J))throw new yZ(Z,J)}var r="State",n="Memo",t="Task",HZ="Sensor",g="List",a="Collection",e="Store",ZZ="Slot",p=0,hZ=1,P=2,AZ=4,y=8,D=null,u=null,fZ=[],I=0,J6=!1,c=(Z,J)=>Z===J,X6=(Z,J)=>!1;function _6(Z,J){let X=J.sourcesTail;if(X){let $=J.sources;while($){if($===Z)return!0;if($===X)break;$=$.nextSource}}return!1}function A(Z,J){let X=J.sourcesTail;if(X?.source===Z)return;let $=null,W=J.flags&AZ;if(W){if($=X?X.nextSource:J.sources,$?.source===Z){J.sourcesTail=$;return}}let H=Z.sinksTail;if(H?.sink===J&&(!W||_6(H,J)))return;let q={source:Z,sink:J,nextSource:$,prevSink:H,nextSink:null};if(J.sourcesTail=Z.sinksTail=q,X)X.nextSource=q;else J.sources=q;if(H)H.nextSink=q;else Z.sinks=q}function T6(Z){let{source:J,nextSource:X,nextSink:$,prevSink:W}=Z;if($)$.prevSink=W;else J.sinksTail=W;if(W)W.nextSink=$;else J.sinks=$;if(!J.sinks){if(J.stop)J.stop(),J.stop=void 0;if("sources"in J&&J.sources){let H=J;H.sourcesTail=null,KZ(H)}}return X}function KZ(Z){let J=Z.sourcesTail,X=J?J.nextSource:Z.sources;while(X)X=T6(X);if(J)J.nextSource=null;else Z.sources=null}function x(Z,J=P){let X=Z.flags;if("sinks"in Z){if((X&(P|hZ))>=J)return;if(Z.flags=X|J,"controller"in Z&&Z.controller)Z.controller.abort(),Z.controller=void 0;for(let $=Z.sinks;$;$=$.nextSink)x($.sink,hZ)}else{if(X&P)return;Z.flags=P,fZ.push(Z)}}function IZ(Z,J){if(Z.equals(Z.value,J))return;Z.value=J;for(let X=Z.sinks;X;X=X.nextSink)x(X.sink);if(I===0)w()}function zZ(Z,J){if(!Z.cleanup)Z.cleanup=J;else if(Array.isArray(Z.cleanup))Z.cleanup.push(J);else Z.cleanup=[Z.cleanup,J]}function kZ(Z){if(!Z.cleanup)return;if(Array.isArray(Z.cleanup))for(let J=0;J<Z.cleanup.length;J++)Z.cleanup[J]();else Z.cleanup();Z.cleanup=null}function S6(Z){let J=D;D=Z,Z.sourcesTail=null,Z.flags=AZ;let X=!1;try{let $=Z.fn(Z.value);if(Z.error||!Z.equals($,Z.value))Z.value=$,Z.error=void 0,X=!0}catch($){X=!0,Z.error=$ instanceof Error?$:Error(String($))}finally{D=J,KZ(Z)}if(X){for(let $=Z.sinks;$;$=$.nextSink)if($.sink.flags&hZ)$.sink.flags|=P}Z.flags=p}function b6(Z){Z.controller?.abort();let J=new AbortController;Z.controller=J,Z.error=void 0;let X=D;D=Z,Z.sourcesTail=null,Z.flags=AZ;let $;try{$=Z.fn(Z.value,J.signal)}catch(W){Z.controller=void 0,Z.error=W instanceof Error?W:Error(String(W));return}finally{D=X,KZ(Z)}$.then((W)=>{if(J.signal.aborted)return;if(Z.controller=void 0,Z.error||!Z.equals(W,Z.value)){Z.value=W,Z.error=void 0;for(let H=Z.sinks;H;H=H.nextSink)x(H.sink);if(I===0)w()}},(W)=>{if(J.signal.aborted)return;Z.controller=void 0;let H=W instanceof Error?W:Error(String(W));if(!Z.error||H.name!==Z.error.name||H.message!==Z.error.message){Z.error=H;for(let q=Z.sinks;q;q=q.nextSink)x(q.sink);if(I===0)w()}}),Z.flags=p}function $6(Z){kZ(Z);let J=D,X=u;D=u=Z,Z.sourcesTail=null,Z.flags=AZ;try{let $=Z.fn();if(typeof $==="function")zZ(Z,$)}finally{D=J,u=X,KZ(Z)}Z.flags=p}function _(Z){if(Z.flags&hZ)for(let J=Z.sources;J;J=J.nextSource){if("fn"in J.source)_(J.source);if(Z.flags&P)break}if(Z.flags&AZ)throw new QZ("controller"in Z?t:("value"in Z)?n:"Effect");if(Z.flags&P)if("controller"in Z)b6(Z);else if("value"in Z)S6(Z);else $6(Z);else Z.flags=p}function w(){if(J6)return;J6=!0;try{for(let Z=0;Z<fZ.length;Z++){let J=fZ[Z];if(J.flags&P)_(J)}fZ.length=0}finally{J6=!1}}function o(Z){I++;try{Z()}finally{if(I--,I===0)w()}}function s(Z){let J=D;D=null;try{return Z()}finally{D=J}}function O6(Z){let J=u,X={cleanup:null};u=X;try{let $=Z();if(typeof $==="function")zZ(X,$);let W=()=>kZ(X);if(J)zZ(J,W);return W}finally{u=J}}function f(Z,J){Y(r,Z,J?.guard);let X={value:Z,sinks:null,sinksTail:null,equals:J?.equals??c,guard:J?.guard};return{[Symbol.toStringTag]:r,get(){if(D)A(X,D);return X.value},set($){Y(r,$,X.guard),IZ(X,$)},update($){k(r,$);let W=$(X.value);Y(r,W,X.guard),IZ(X,W)}}}function CZ(Z){return S(Z,r)}function JZ(Z,J,X){if(Object.is(Z,J))return!0;if(typeof Z!==typeof J)return!1;if(Z==null||typeof Z!=="object"||J==null||typeof J!=="object")return!1;if(!X)X=new WeakSet;if(X.has(Z)||X.has(J))throw new QZ("isEqual");X.add(Z),X.add(J);try{let $=Array.isArray(Z);if($!==Array.isArray(J))return!1;if($){let W=Z,H=J;if(W.length!==H.length)return!1;for(let q=0;q<W.length;q++)if(!JZ(W[q],H[q],X))return!1;return!0}if(L(Z)&&L(J)){let W=Object.keys(Z),H=Object.keys(J);if(W.length!==H.length)return!1;for(let q of W){if(!(q in J))return!1;if(!JZ(Z[q],J[q],X))return!1}return!0}return!1}finally{X.delete(Z),X.delete(J)}}function gZ(Z,J){if(Z.length!==J.length)return!1;for(let X=0;X<Z.length;X++)if(Z[X]!==J[X])return!1;return!0}function H6(Z){let J=0,X=typeof Z==="function";return[typeof Z==="string"?()=>`${Z}${J++}`:X?($)=>Z($)||String(J++):()=>String(J++),X]}function y6(Z,J,X,$,W){let H=new WeakSet,q={},z={},U={},M=[],Q=!1,j=new Map;for(let G=0;G<Z.length;G++){let B=X[G];if(B&&Z[G])j.set(B,Z[G])}let K=new Set;for(let G=0;G<J.length;G++){let B=J[G];if(B===void 0)continue;let V=W?$(B):X[G]??$(B);if(K.has(V))throw new jZ(g,V,B);if(M.push(V),K.add(V),!j.has(V))q[V]=B,Q=!0;else if(!JZ(j.get(V),B,H))z[V]=B,Q=!0}for(let[G]of j)if(!K.has(G))U[G]=null,Q=!0;if(!Q&&!gZ(X,M))Q=!0;return{add:q,change:z,remove:U,newKeys:M,changed:Q}}function DZ(Z,J){Y(g,Z,Array.isArray);let X=new Map,$=[],[W,H]=H6(J?.keyConfig),q=()=>$.map((B)=>X.get(B)?.get()).filter((B)=>B!==void 0),z={fn:q,value:Z,flags:P,sources:null,sourcesTail:null,sinks:null,sinksTail:null,equals:JZ,error:void 0},U=(B)=>{let V={};for(let C=0;C<B.length;C++){let O=B[C];if(O===void 0)continue;let N=$[C];if(!N)N=W(O),$[C]=N;V[N]=O}return V},M=(B)=>{let V=!1;for(let C in B.add){let O=B.add[C];Y(`${g} item for key "${C}"`,O),X.set(C,f(O)),V=!0}if(Object.keys(B.change).length)o(()=>{for(let C in B.change){let O=B.change[C];Y(`${g} item for key "${C}"`,O);let N=X.get(C);if(N)N.set(O)}});for(let C in B.remove){X.delete(C);let O=$.indexOf(C);if(O!==-1)$.splice(O,1);V=!0}if(V)z.flags|=y;return B.changed},Q=J?.watched,j=Q?()=>{if(D){if(!z.sinks)z.stop=Q();A(z,D)}}:()=>{if(D)A(z,D)},K=U(Z);for(let B in K){let V=K[B];Y(`${g} item for key "${B}"`,V),X.set(B,f(V))}z.value=Z,z.flags=0;let G={[Symbol.toStringTag]:g,[Symbol.isConcatSpreadable]:!0,*[Symbol.iterator](){for(let B of $){let V=X.get(B);if(V)yield V}},get length(){return j(),$.length},get(){if(j(),z.sources){if(z.flags){let B=z.flags&y;if(z.value=s(q),B){if(z.flags=P,_(z),z.error)throw z.error}else z.flags=p}}else if(_(z),z.error)throw z.error;return z.value},set(B){let V=z.flags&P?q():z.value,C=y6(V,B,$,W,H);if(C.changed){$=C.newKeys,M(C),z.flags|=P;for(let O=z.sinks;O;O=O.nextSink)x(O.sink);if(I===0)w()}},update(B){G.set(B(G.get()))},at(B){return X.get($[B])},keys(){return j(),$.values()},byKey(B){return X.get(B)},keyAt(B){return $[B]},indexOfKey(B){return $.indexOf(B)},add(B){let V=W(B);if(X.has(V))throw new jZ(g,V,B);if(!$.includes(V))$.push(V);Y(`${g} item for key "${V}"`,B),X.set(V,f(B)),z.flags|=P|y;for(let C=z.sinks;C;C=C.nextSink)x(C.sink);if(I===0)w();return V},remove(B){let V=typeof B==="number"?$[B]:B;if(X.delete(V)){let O=typeof B==="number"?B:$.indexOf(V);if(O>=0)$.splice(O,1);z.flags|=P|y;for(let N=z.sinks;N;N=N.nextSink)x(N.sink);if(I===0)w()}},sort(B){let C=$.map((O)=>[O,X.get(O)?.get()]).sort(F(B)?(O,N)=>B(O[1],N[1]):(O,N)=>String(O[1]).localeCompare(String(N[1]))).map(([O])=>O);if(!gZ($,C)){$=C,z.flags|=P;for(let O=z.sinks;O;O=O.nextSink)x(O.sink);if(I===0)w()}},splice(B,V,...C){let O=$.length,N=B<0?Math.max(0,O+B):Math.min(B,O),T=Math.max(0,Math.min(V??Math.max(0,O-Math.max(0,N)),O-N)),b={},h={};for(let v=0;v<T;v++){let BZ=N+v,Z6=$[BZ];if(Z6){let C6=X.get(Z6);if(C6)h[Z6]=C6.get()}}let eZ=$.slice(0,N);for(let v of C){let BZ=W(v);if(X.has(BZ)&&!(BZ in h))throw new jZ(g,BZ,v);eZ.push(BZ),b[BZ]=v}eZ.push(...$.slice(N+T));let K6=!!(Object.keys(b).length||Object.keys(h).length);if(K6){M({add:b,change:{},remove:h,changed:K6}),$=eZ,z.flags|=P;for(let v=z.sinks;v;v=v.nextSink)x(v.sink);if(I===0)w()}return Object.values(h)},deriveCollection(B){return pZ(G,B)}};return G}function xZ(Z){return S(Z,g)}function i(Z,J){if(k(n,Z,UZ),J?.value!==void 0)Y(n,J.value,J?.guard);let X={fn:Z,value:J?.value,flags:P,sources:null,sourcesTail:null,sinks:null,sinksTail:null,equals:J?.equals??c,error:void 0,stop:void 0},$=J?.watched,W=$?()=>{if(D){if(!X.sinks)X.stop=$(()=>{X.flags|=P;for(let H=X.sinks;H;H=H.nextSink)x(H.sink);if(I===0)w()});A(X,D)}}:()=>{if(D)A(X,D)};return{[Symbol.toStringTag]:n,get(){if(W(),_(X),X.error)throw X.error;return GZ(n,X.value),X.value}}}function WZ(Z){return S(Z,n)}function OZ(Z,J){if(k(t,Z,XZ),J?.value!==void 0)Y(t,J.value,J?.guard);let X={fn:Z,value:J?.value,sources:null,sourcesTail:null,sinks:null,sinksTail:null,flags:P,equals:J?.equals??c,controller:void 0,error:void 0,stop:void 0},$=J?.watched,W=$?()=>{if(D){if(!X.sinks)X.stop=$(()=>{X.flags|=P;for(let H=X.sinks;H;H=H.nextSink)x(H.sink);if(I===0)w()});A(X,D)}}:()=>{if(D)A(X,D)};return{[Symbol.toStringTag]:t,get(){if(W(),_(X),X.error)throw X.error;return GZ(t,X.value),X.value},isPending(){return!!X.controller},abort(){X.controller?.abort(),X.controller=void 0}}}function vZ(Z){return S(Z,t)}function pZ(Z,J){k(a,J);let X=XZ(J),$=new Map,W=[],H=(G)=>{let B=X?OZ(async(V,C)=>{let O=Z.byKey(G)?.get();if(O==null)return V;return J(O,C)}):i(()=>{let V=Z.byKey(G)?.get();if(V==null)return;return J(V)});$.set(G,B)};function q(G){if(!gZ(W,G)){let B=new Set(W),V=new Set(G);for(let C of W)if(!V.has(C))$.delete(C);for(let C of G)if(!B.has(C))H(C);W=G,M.flags|=y}}function z(){q(Array.from(Z.keys()));let G=[];for(let B of W)try{let V=$.get(B)?.get();if(V!=null)G.push(V)}catch(V){if(!(V instanceof $Z))throw V}return G}let M={fn:z,value:[],flags:P,sources:null,sourcesTail:null,sinks:null,sinksTail:null,equals:(G,B)=>{if(G.length!==B.length)return!1;for(let V=0;V<G.length;V++)if(G[V]!==B[V])return!1;return!0},error:void 0};function Q(){if(M.sources){if(M.flags)if(M.value=s(z),M.flags&y){if(M.flags=P,_(M),M.error)throw M.error}else M.flags=p}else if(M.sinks){if(_(M),M.error)throw M.error}else M.value=s(z)}let j=Array.from(s(()=>Z.keys()));for(let G of j)H(G);W=j;let K={[Symbol.toStringTag]:a,[Symbol.isConcatSpreadable]:!0,*[Symbol.iterator](){for(let G of W){let B=$.get(G);if(B)yield B}},get length(){if(D)A(M,D);return Q(),W.length},keys(){if(D)A(M,D);return Q(),W.values()},get(){if(D)A(M,D);return Q(),M.value},at(G){return $.get(W[G])},byKey(G){return $.get(G)},keyAt(G){return W[G]},indexOfKey(G){return W.indexOf(G)},deriveCollection(G){return pZ(K,G)}};return K}function P6(Z,J){let X=J?.value??[];if(X.length)Y(a,X,Array.isArray);k(a,Z,UZ);let $=new Map,W=[],H=new Map,[q,z]=H6(J?.keyConfig),U=(B)=>H.get(B)??(z?q(B):void 0),M=J?.createItem??f;function Q(){let B=[];for(let V of W)try{let C=$.get(V)?.get();if(C!=null)B.push(C)}catch(C){if(!(C instanceof $Z))throw C}return B}let j={fn:Q,value:X,flags:P,sources:null,sourcesTail:null,sinks:null,sinksTail:null,equals:X6,error:void 0};for(let B of X){let V=q(B);$.set(V,M(B)),H.set(B,V),W.push(V)}j.value=X,j.flags=P;function K(){if(D){if(!j.sinks)j.stop=Z((B)=>{let{add:V,change:C,remove:O}=B;if(!V?.length&&!C?.length&&!O?.length)return;let N=!1;o(()=>{if(V)for(let T of V){let b=q(T);if($.set(b,M(T)),H.set(T,b),!W.includes(b))W.push(b);N=!0}if(C)for(let T of C){let b=U(T);if(!b)continue;let h=$.get(b);if(h&&CZ(h))H.delete(h.get()),h.set(T),H.set(T,b)}if(O)for(let T of O){let b=U(T);if(!b)continue;H.delete(T),$.delete(b);let h=W.indexOf(b);if(h!==-1)W.splice(h,1);N=!0}j.flags=P|(N?y:0);for(let T=j.sinks;T;T=T.nextSink)x(T.sink)})});A(j,D)}}let G={[Symbol.toStringTag]:a,[Symbol.isConcatSpreadable]:!0,*[Symbol.iterator](){for(let B of W){let V=$.get(B);if(V)yield V}},get length(){return K(),W.length},keys(){return K(),W.values()},get(){if(K(),j.sources){if(j.flags){let B=j.flags&y;if(j.value=s(Q),B){if(j.flags=P,_(j),j.error)throw j.error}else j.flags=p}}else if(_(j),j.error)throw j.error;return j.value},at(B){return $.get(W[B])},byKey(B){return $.get(B)},keyAt(B){return W[B]},indexOfKey(B){return W.indexOf(B)},deriveCollection(B){return pZ(G,B)}};return G}function N6(Z){return S(Z,a)}function wZ(Z){k("Effect",Z);let J={fn:Z,flags:P,sources:null,sourcesTail:null,cleanup:null},X=()=>{kZ(J),J.fn=void 0,J.flags=p,J.sourcesTail=null,KZ(J)};if(u)zZ(u,X);return $6(J),X}function Y6(Z,J){if(!u)throw new EZ("match");let{ok:X,err:$=console.error,nil:W}=J,H,q=!1,z=Array(Z.length);for(let M=0;M<Z.length;M++)try{z[M]=Z[M].get()}catch(Q){if(Q instanceof $Z){q=!0;continue}if(!H)H=[];H.push(Q instanceof Error?Q:Error(String(Q)))}let U;try{if(q)U=W?.();else if(H)U=$(H);else U=X(z)}catch(M){$([M instanceof Error?M:Error(String(M))])}if(typeof U==="function")return U;if(U instanceof Promise){let M=u,Q=new AbortController;zZ(M,()=>Q.abort()),U.then((j)=>{if(!Q.signal.aborted&&typeof j==="function")zZ(M,j)}).catch((j)=>{$([j instanceof Error?j:Error(String(j))])})}}function dZ(Z,J){if(k(HZ,Z,UZ),J?.value!==void 0)Y(HZ,J.value,J?.guard);let X={value:J?.value,sinks:null,sinksTail:null,equals:J?.equals??c,guard:J?.guard,stop:void 0};return{[Symbol.toStringTag]:HZ,get(){if(D){if(!X.sinks)X.stop=Z(($)=>{Y(HZ,$,X.guard),IZ(X,$)});A(X,D)}return GZ(HZ,X.value),X.value}}}function m6(Z,J){let X=L(Z)||Array.isArray(Z),$=L(J)||Array.isArray(J);if(!X||!$){let j=!Object.is(Z,J);return{changed:j,add:j&&$?J:{},change:{},remove:j&&X?Z:{}}}let W=new WeakSet,H={},q={},z={},U=!1,M=Object.keys(Z),Q=Object.keys(J);for(let j of Q)if(j in Z){if(!JZ(Z[j],J[j],W))q[j]=J[j],U=!0}else H[j]=J[j],U=!0;for(let j of M)if(!(j in J))z[j]=void 0,U=!0;return{add:H,change:q,remove:z,changed:U}}function RZ(Z,J){Y(e,Z,L);let X=new Map,$=(Q,j)=>{if(Y(`${e} for key "${Q}"`,j),Array.isArray(j))X.set(Q,DZ(j));else if(L(j))X.set(Q,RZ(j));else X.set(Q,f(j))},W=()=>{let Q={};return X.forEach((j,K)=>{Q[K]=j.get()}),Q},H={fn:W,value:Z,flags:P,sources:null,sourcesTail:null,sinks:null,sinksTail:null,equals:JZ,error:void 0},q=(Q)=>{let j=!1;for(let K in Q.add)$(K,Q.add[K]),j=!0;if(Object.keys(Q.change).length)o(()=>{for(let K in Q.change){let G=Q.change[K];Y(`${e} for key "${K}"`,G);let B=X.get(K);if(B)if(L(G)!==LZ(B))$(K,G),j=!0;else B.set(G)}});for(let K in Q.remove)X.delete(K),j=!0;if(j)H.flags|=y;return Q.changed},z=J?.watched,U=z?()=>{if(D){if(!H.sinks)H.stop=z();A(H,D)}}:()=>{if(D)A(H,D)};for(let Q of Object.keys(Z))$(Q,Z[Q]);let M={[Symbol.toStringTag]:e,[Symbol.isConcatSpreadable]:!1,*[Symbol.iterator](){for(let Q of Array.from(X.keys())){let j=X.get(Q);if(j)yield[Q,j]}},keys(){return U(),X.keys()},byKey(Q){return X.get(Q)},get(){if(U(),H.sources){if(H.flags){let Q=H.flags&y;if(H.value=s(W),Q){if(H.flags=P,_(H),H.error)throw H.error}else H.flags=p}}else if(_(H),H.error)throw H.error;return H.value},set(Q){let j=H.flags&P?W():H.value,K=m6(j,Q);if(q(K)){H.flags|=P;for(let G=H.sinks;G;G=G.nextSink)x(G.sink);if(I===0)w()}},update(Q){M.set(Q(M.get()))},add(Q,j){if(X.has(Q))throw new jZ(e,Q,j);$(Q,j),H.flags|=P|y;for(let K=H.sinks;K;K=K.nextSink)x(K.sink);if(I===0)w();return Q},remove(Q){if(X.delete(Q)){H.flags|=P|y;for(let K=H.sinks;K;K=K.nextSink)x(K.sink);if(I===0)w()}}};return new Proxy(M,{get(Q,j){if(j in Q)return Reflect.get(Q,j);if(typeof j!=="symbol")return Q.byKey(j)},has(Q,j){if(j in Q)return!0;return Q.byKey(String(j))!==void 0},ownKeys(Q){return Array.from(Q.keys())},getOwnPropertyDescriptor(Q,j){if(j in Q)return Reflect.getOwnPropertyDescriptor(Q,j);if(typeof j==="symbol")return;let K=Q.byKey(String(j));return K?{enumerable:!0,configurable:!0,writable:!0,value:K}:void 0}})}function LZ(Z){return S(Z,e)}function PZ(Z,J){return XZ(Z)?OZ(Z,J):i(Z,J)}function F6(Z){if(qZ(Z))return Z;if(Z==null||F(Z)||d(Z))throw new VZ("createMutableSignal",Z);if(D6(Z))return DZ(Z);if(L(Z))return RZ(Z);return f(Z)}function uZ(Z){return WZ(Z)||vZ(Z)}function d(Z){let J=[r,n,t,HZ,ZZ,g,a,e],X=Object.prototype.toString.call(Z).slice(8,-1);return J.includes(X)}function qZ(Z){return CZ(Z)||LZ(Z)||xZ(Z)}function W6(Z,J){Y(ZZ,Z,d);let X=Z,$=J?.guard,W={fn:()=>X.get(),value:void 0,flags:P,sources:null,sourcesTail:null,sinks:null,sinksTail:null,equals:J?.equals??c,error:void 0},H=()=>{if(D)A(W,D);if(_(W),W.error)throw W.error;return W.value},q=(U)=>{if(!qZ(X))throw new mZ(ZZ);Y(ZZ,U,$),X.set(U)},z=(U)=>{Y(ZZ,U,d),X=U,W.flags|=P;for(let M=W.sinks;M;M=M.nextSink)x(M.sink);if(I===0)w()};return{[Symbol.toStringTag]:ZZ,configurable:!0,enumerable:!0,get:H,set:q,replace:z,current:()=>X}}function _Z(Z){return S(Z,ZZ)}var B6=!1,E6="debug";var f6="warn",NZ="error",h6=new Set(["constructor","prototype"]),k6=new Set(["id","class","className","title","role","style","dataset","lang","dir","hidden","children","innerHTML","outerHTML","textContent","innerText"]),g6=(Z)=>Z?`#${Z}`:"",p6=(Z)=>Z?.length?`.${Array.from(Z).join(".")}`:"";var Q6=(Z)=>Z.localName.includes("-"),j6=(Z)=>Q6(Z)&&Z.matches(":not(:defined)"),R=(Z)=>Z?`<${Z.localName}${g6(Z.id)}${p6(Z.classList)}>`:"<unknown>";var YZ=(Z,J,X=E6)=>{if(B6||[NZ,f6].includes(X))console[X](J,Z);return Z},A6=(Z)=>{if(h6.has(Z))return`Property name "${Z}" is a reserved word`;if(k6.has(Z))return`Property name "${Z}" conflicts with inherited HTMLElement property`;return null};class I6 extends Error{constructor(Z,J){super(`Circular dependency detected in selection signal for component ${R(Z)} with selector "${J}"`);this.name="CircularMutationError"}}class cZ extends TypeError{constructor(Z){super(`Invalid component name "${Z}". Custom element names must contain a hyphen, start with a lowercase letter, and contain only lowercase letters, numbers, and hyphens.`);this.name="InvalidComponentNameError"}}class oZ extends TypeError{constructor(Z,J,X){super(`Invalid property name "${J}" for component <${Z}>. ${X}`);this.name="InvalidPropertyNameError"}}class sZ extends TypeError{constructor(Z,J){super(`Invalid effects in component ${R(Z)}. Effects must be a record of effects for UI elements or the component, or a Promise that resolves to effects.`);if(this.name="InvalidEffectsError",J)this.cause=J}}class TZ extends Error{constructor(Z,J,X){super(`Missing required element <${J}> in component ${R(Z)}. ${X}`);this.name="MissingElementError"}}class iZ extends Error{constructor(Z,J){super(`Timeout waiting for: [${J.join(", ")}] in component ${R(Z)}.`);this.name="DependencyTimeoutError"}}class lZ extends TypeError{constructor(Z,J,X){super(`Expected reactives passed from ${R(Z)} to ${R(J)} to be a record of signals, reactive property names or functions. Got ${l(X)}.`);this.name="InvalidReactivesError"}}class rZ extends TypeError{constructor(Z,J){super(`Target ${R(Z)} is not a custom element in ${J}.`);this.name="InvalidCustomElementError"}}var z6=Symbol("RESET"),v6=(Z,J="")=>{return{a:"attribute ",c:"class ",d:"dataset ",h:"inner HTML",m:"method call ",p:"property ",s:"style property ",t:"text content"}[Z]+J},q6=(Z,J,X)=>{let $=[],W=(H)=>{let q=H(Z,J);if(q)$.push(q)};if(Array.isArray(X))for(let H of X)W(H);else W(X);return()=>{$.forEach((H)=>H()),$.length=0}},d6=(Z,J,X)=>{let $=new Map,W=(z)=>{for(let U of z){let M=q6(Z,U,X);if(M)$.set(U,M)}},H=(z)=>{for(let U of z)$.get(U)?.(),$.delete(U)},q=wZ(()=>{let z=new Set(J.get()),U=[],M=[];for(let Q of z)if(!$.has(Q))U.push(Q);for(let Q of $.keys())if(!z.has(Q))M.push(Q);W(U),H(M)});return()=>{for(let z of $.values())z();$.clear(),q()}},M6=(Z,J)=>{if(!L(J))throw new sZ(Z.host);let X=[],$=Object.keys(J);for(let W of $){let H=W;if(!J[H])continue;let q=Array.isArray(J[H])?J[H]:[J[H]];if(WZ(Z[H]))X.push(d6(Z.host,Z[H],q));else if(Z[H]){let z=q6(Z.host,Z[H],q);if(z)X.push(z)}}return()=>{for(let W of X)W();X.length=0}},u6=(Z,J,X,$)=>{try{return typeof Z==="string"?J[Z]:d(Z)?Z.get():F(Z)?Z(X):z6}catch(W){if($)YZ(W,`Failed to resolve value of ${l(Z)}${$?` for ${$}`:""} in ${R(X)}${J!==X?` in ${R(J)}`:""}`,NZ);return z6}},m=(Z,J)=>(X,$)=>{let{op:W,name:H="",read:q,update:z}=J,U=v6(W,H),M=(K)=>()=>{if(B6&&X.debug)YZ($,`${K} ${U} of ${R($)} in ${R(X)}`);J.resolve?.($)},Q=(K)=>(G)=>{YZ(G,`Failed to ${K} ${U} of ${R($)} in ${R(X)}`,NZ),J.reject?.(G)},j=q($);return wZ(()=>{let K=u6(Z,X,$,U),G=K===z6?j:K===null?J.delete?null:j:K;if(J.delete&&G===null)try{J.delete($),M("delete")()}catch(B){Q("delete")(B)}else if(G!=null){let B=q($);if(Object.is(G,B))return;try{z($,G),M("update")()}catch(V){Q("update")(V)}}})};var x6=new WeakMap,SZ=(Z)=>{let J=x6.get(Z);if(!J)J={},x6.set(Z,J);return J};var FZ=(Z)=>F(Z)&&Z.length>=2,c6=(Z)=>F(Z),E=(Z,J)=>c6(J)?J(Z):J,o6=(Z,J)=>(X)=>{let $=Z(X);return typeof $==="string"&&FZ(J)?J(X,$):$??E(X,J)};var s6=50,i6=(Z)=>{let J=new Set;if(Z.includes("."))J.add("class");if(Z.includes("#"))J.add("id");if(Z.includes("[")){let X=Z.split("[");for(let $=1;$<X.length;$++){let W=X[$];if(!W.includes("]"))continue;let H=W.split("=")[0].trim().replace(/[^a-zA-Z0-9_-]/g,"");if(H)J.add(H)}}return[...J]};function w6(Z,J){return i(()=>Array.from(Z.querySelectorAll(J)),{value:[],watched:(X)=>{let $={childList:!0,subtree:!0},W=i6(J);if(W.length)$.attributes=!0,$.attributeFilter=W;let H=new MutationObserver(()=>X());return H.observe(Z,$),()=>H.disconnect()}})}var R6=(Z)=>{let J=Z.shadowRoot??Z,X=new Set;function $(q,z){let U=J.querySelector(q);if(z!=null&&!U)throw new TZ(Z,q,z);if(U&&j6(U))X.add(U.localName);return U??void 0}function W(q,z){let U=w6(J,q),M=U.get();if(z!=null&&!M.length)throw new TZ(Z,q,z);if(M.length){for(let Q of M)if(j6(Q))X.add(Q.localName)}return U}return[{first:$,all:W},(q)=>{if(X.size){let z=Array.from(X);Promise.race([Promise.all(z.map((U)=>customElements.whenDefined(U))),new Promise((U,M)=>{setTimeout(()=>{M(new iZ(Z,z.filter((Q)=>!customElements.get(Q))))},s6)})]).then(q).catch(()=>{q()})}else q()}]};function l6(Z,J={},X=()=>({}),$=()=>({})){if(!Z.includes("-")||!Z.match(/^[a-z][a-z0-9-]*$/))throw new cZ(Z);for(let H of Object.keys(J)){let q=A6(H);if(q)throw new oZ(Z,H,q)}class W extends HTMLElement{debug;#Z;#J;static observedAttributes=Object.entries(J)?.filter(([,H])=>FZ(H)).map(([H])=>H)??[];connectedCallback(){let[H,q]=R6(this),z={...X(H),host:this};this.#Z=z,Object.freeze(this.#Z);let U=(Q)=>{return F(Q)},M=(Q,j)=>{let K=FZ(j)?j(z,this.getAttribute(Q)):U(j)?j(z):j;if(K!=null)this.#X(Q,K)};for(let[Q,j]of Object.entries(J)){if(j==null||Q in this)continue;M(Q,j)}q(()=>{this.#J=M6(z,$(z))})}disconnectedCallback(){if(F(this.#J))this.#J()}attributeChangedCallback(H,q,z){if(!this.#Z||z===q||uZ(SZ(this)[H]))return;let U=J[H];if(!FZ(U))return;let M=U(this.#Z,z,q);if(H in this)this[H]=M;else this.#X(H,M)}#X(H,q){let z=d(q)?q:F(q)?PZ(q):f(q),U=SZ(this),M=H,Q=U[M];if(_Z(Q))Q.replace(z);else if(qZ(z)){let j=W6(z);U[M]=j,Object.defineProperty(this,H,j)}else U[M]=z,Object.defineProperty(this,H,{get:z.get,enumerable:!0})}}return customElements.define(Z,W),customElements.get(Z)}var nZ="context-request";class U6 extends Event{context;callback;subscribe;constructor(Z,J,X=!1){super(nZ,{bubbles:!0,composed:!0});this.context=Z,this.callback=J,this.subscribe=X}}var r6=(Z)=>(J)=>{let X=($)=>{let{context:W,callback:H}=$;if(typeof W==="string"&&Z.includes(W)&&F(H))$.stopImmediatePropagation(),H(()=>J[W])};return J.addEventListener(nZ,X),()=>J.removeEventListener(nZ,X)},n6=(Z,J)=>(X)=>{let $=()=>E(X,J);return X.host.dispatchEvent(new U6(Z,(W)=>{$=W})),i($)};var t6=(Z)=>{if(/^(mailto|tel):/i.test(Z))return!0;if(Z.includes("://"))try{let J=new URL(Z,window.location.origin);return["http:","https:","ftp:"].includes(J.protocol)}catch{return!1}return!0},a6=(Z,J,X)=>{if(/^on/i.test(J))throw Error(`Unsafe attribute: ${J}`);if(X=String(X).trim(),!t6(X))throw Error(`Unsafe URL for ${J}: ${X}`);Z.setAttribute(J,X)},e6=(Z,J=Z)=>m(J,{op:"a",name:Z,read:(X)=>X.getAttribute(Z),update:(X,$)=>{a6(X,Z,$)},delete:(X)=>{X.removeAttribute(Z)}}),ZJ=(Z,J=Z)=>m(J,{op:"a",name:Z,read:(X)=>X.hasAttribute(Z),update:(X,$)=>{X.toggleAttribute(Z,$)}});var JJ=(Z,J=Z)=>m(J,{op:"c",name:Z,read:(X)=>X.classList.contains(Z),update:(X,$)=>{X.classList.toggle(Z,$)}});var aZ=new Set(["scroll","resize","mousewheel","touchstart","touchmove","wheel"]),V6=new Set,L6=new WeakMap,tZ,XJ=()=>{tZ=void 0;let Z=Array.from(V6);V6.clear();for(let J of Z)L6.get(J)?.()},$J=()=>{if(tZ)cancelAnimationFrame(tZ);tZ=requestAnimationFrame(XJ)},MZ=(Z,J)=>{L6.set(Z,J),V6.add(Z),$J()};var HJ=(Z,J,X={})=>($,W)=>{if(!("passive"in X))X={...X,passive:aZ.has(Z)};let H=(q)=>{let z=()=>{let U=J(q);if(!L(U))return;o(()=>{for(let[M,Q]of Object.entries(U))try{$[M]=Q}catch(j){YZ(j,`Reactive property "${M}" on ${R($)} from event ${Z} on ${R(W)} could not be set, because it is read-only.`,NZ)}})};if(X.passive)MZ(W,z);else z()};return W.addEventListener(Z,H,X),()=>W.removeEventListener(Z,H)};var WJ=(Z,J={})=>m(Z,{op:"h",read:(X)=>(X.shadowRoot||!J.shadowRootMode?X:null)?.innerHTML??"",update:(X,$)=>{let{shadowRootMode:W,allowScripts:H}=J;if(!$){if(X.shadowRoot)X.shadowRoot.innerHTML="<slot></slot>";return""}if(W&&!X.shadowRoot)X.attachShadow({mode:W});let q=X.shadowRoot||X;return MZ(X,()=>{if(q.innerHTML=$,H)q.querySelectorAll("script").forEach((z)=>{let U=document.createElement("script");U.appendChild(document.createTextNode(z.textContent??""));let M=z.getAttribute("type");if(M)U.setAttribute("type",M);q.appendChild(U),z.remove()})}),H?" with scripts":""}});var BJ=(Z)=>(J,X)=>{if(!Q6(X))throw new rZ(X,`pass from ${R(J)}`);let $=F(Z)?Z(X):Z;if(!L($))throw new lZ(J,X,$);let W=(q)=>{if(d(q))return q;let z=typeof q==="string"&&q in J?()=>J[q]:F(q)?q:void 0;return z?PZ(z):void 0},H=SZ(X);for(let[q,z]of Object.entries($)){if(z==null)continue;if(!(q in X))continue;let U=F(z)&&z.length===1?z(X):z,M=Array.isArray(U)&&U.length===2,Q=W(M?U[0]:U);if(!Q)continue;let j=H[q];if(_Z(j))j.replace(Q)}};var QJ=(Z,J=Z)=>m(J,{op:"p",name:Z,read:(X)=>(Z in X)?X[Z]??null:null,update:(X,$)=>{X[Z]=$}}),jJ=(Z)=>m(Z,{op:"p",name:"hidden",read:(J)=>!J.hidden,update:(J,X)=>{J.hidden=!X}});var zJ=(Z,J=Z)=>m(J,{op:"s",name:Z,read:(X)=>X.style.getPropertyValue(Z),update:(X,$)=>{X.style.setProperty(Z,$)},delete:(X)=>{X.style.removeProperty(Z)}});var qJ=(Z)=>m(Z,{op:"t",read:(J)=>J.textContent,update:(J,X)=>{Array.from(J.childNodes).filter(($)=>$.nodeType!==Node.COMMENT_NODE).forEach(($)=>$.remove()),J.append(document.createTextNode(X))}});var MJ=(Z,J,X)=>($)=>{let{host:W}=$,H=E($,Z),q=WZ($[J])?$[J].get():[$[J]],z=new Map,U=(M)=>{for(let Q of q)if(Q.contains(M))return Q};return dZ((M)=>{for(let[Q,j]of Object.entries(X)){let K={passive:aZ.has(Q)},G=(B)=>{let V=B.target;if(!V)return;let C=U(V);if(!C)return;B.stopPropagation();let O=()=>{try{let N=j({event:B,ui:$,target:C,prev:H});if(N==null||N instanceof Promise)return;if(!Object.is(N,H))H=N,M(N)}catch(N){throw B.stopImmediatePropagation(),N}};if(K.passive)MZ(W,O);else O()};z.set(Q,G),W.addEventListener(Q,G,K)}return()=>{if(z.size){for(let[Q,j]of z)W.removeEventListener(Q,j);z.clear()}}},{value:H})};var UJ=()=>(Z,J)=>J!=null&&J!=="false";var VJ=(Z)=>(J,X)=>{if((X??Z)==null)throw TypeError("asJSON: Value and fallback are both null or undefined");if(X==null)return E(J,Z);if(X==="")throw TypeError("Empty string is not valid JSON");let $;try{$=JSON.parse(X)}catch(W){throw SyntaxError(`Failed to parse JSON: ${String(W)}`,{cause:W})}return $??E(J,Z)};var G6=(Z,J)=>{if(J==null)return;let X=Z(J);return Number.isFinite(X)?X:void 0},GJ=(Z=0)=>(J,X)=>{if(X==null)return E(J,Z);let $=X.trim();if($.toLowerCase().startsWith("0x"))return G6((H)=>parseInt(H,16),$)??E(J,Z);let W=G6(parseFloat,X);return W!=null?Math.trunc(W):E(J,Z)},KJ=(Z=0)=>(J,X)=>G6(parseFloat,X)??E(J,Z);var CJ=(Z="")=>(J,X)=>X??E(J,Z),DJ=(Z)=>(J,X)=>{if(X==null)return Z[0];let $=X.toLowerCase();return Z.find((H)=>H.toLowerCase()===$)?X:Z[0]};export{l as valueString,m as updateElement,JJ as toggleClass,ZJ as toggleAttribute,jJ as show,qJ as setText,zJ as setStyle,QJ as setProperty,e6 as setAttribute,MZ as schedule,q6 as runElementEffects,M6 as runEffects,n6 as requestContext,o6 as read,r6 as provideContexts,BJ as pass,HJ as on,Y6 as match,vZ as isTask,LZ as isStore,CZ as isState,d as isSignal,L as isRecord,FZ as isParser,qZ as isMutableSignal,WZ as isMemo,xZ as isList,F as isFunction,JZ as isEqual,uZ as isComputed,N6 as isCollection,XZ as isAsyncFunction,l6 as defineComponent,WJ as dangerouslySetInnerHTML,OZ as createTask,RZ as createStore,f as createState,dZ as createSensor,O6 as createScope,F6 as createMutableSignal,i as createMemo,DZ as createList,MJ as createEventsSensor,w6 as createElementsMemo,wZ as createEffect,PZ as createComputed,P6 as createCollection,o as batch,CJ as asString,KJ as asNumber,VJ as asJSON,GJ as asInteger,DJ as asEnum,UJ as asBoolean,bZ as NullishSignalValueError,TZ as MissingElementError,VZ as InvalidSignalValueError,lZ as InvalidReactivesError,oZ as InvalidPropertyNameError,sZ as InvalidEffectsError,rZ as InvalidCustomElementError,cZ as InvalidComponentNameError,yZ as InvalidCallbackError,iZ as DependencyTimeoutError,U6 as ContextRequestEvent,I6 as CircularMutationError,QZ as CircularDependencyError,nZ as CONTEXT_REQUEST};

//# debugId=9080ED632E21C9B364756E2164756E21
